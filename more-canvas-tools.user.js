// ==UserScript==
// @name         More Canvas Tools
// @version      0.5.0
// @description  Next generation canvas tools for simplifying your life
// @author       Austin Cory Bart
// @match        *://*.instructure.com/*
// @namespace    udcis.canvas
// @run-at       document-start
// @grant        none
// @updateURL    https://ud-cis-teaching.github.io/more-canvas-tools/more-canvas-tools.user.js
// @downloadURL  https://ud-cis-teaching.github.io/more-canvas-tools/more-canvas-tools.user.js
// ==/UserScript==
/*! For license information please see more-canvas-tools.user.js.LICENSE.txt */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=35)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(7),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=d;var o=Object.create(n(5));o.inherits=n(2);var s=n(14),a=n(11);o.inherits(d,s);for(var l=i(a.prototype),u=0;u<l.length;u++){var c=l[u];d.prototype[c]||(d.prototype[c]=a.prototype[c])}function d(t){if(!(this instanceof d))return new d(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),d.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){"use strict";(function(t){var r=n(23),i=n(24),o=n(12);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|h(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(c(e),t=a(t,e<0?0:0|h(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|h(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,s=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var d=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){d=!1;break}if(d)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function y(t,e,n,r){return F(U(e,t.length-n),t,n,r)}function w(t,e,n,r){return F(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return w(t,e,n,r)}function S(t,e,n,r){return F(j(e),t,n,r)}function x(t,e,n,r){return F(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,l,u=t[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return d(null,t)},l.allocUnsafeSlow=function(t){return d(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=t.slice(e,n),d=0;d<a;++d)if(u[d]!==c[d]){o=u[d],s=c[d];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return y(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=M(t[o]);return i}function C(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function $(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(t,e,n,r,o){return o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,o){return o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):$(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):$(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return z(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return z(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=l.isBuffer(t)?t:U(new l(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(P,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(0))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var l,u=[],c=!1,d=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!c){var t=a(f);c=!0;for(var e=u.length;e;){for(l=u,u=[];++d<e;)l&&l[d].run();d=-1,e=u.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(3).Buffer.isBuffer},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(25),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(4))},function(t,e,n){var r=n(3),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}_(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&_(t,"error",e,n)}(t,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function d(t,e,n,r){var i,o,s,a;if(u(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(t))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function _(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var u=l.length,c=g(l,u);for(n=0;n<u;++n)o(c[n],this,e)}return!0},a.prototype.addListener=function(t,e){return d(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return d(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,h(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,o,s;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){(e=t.exports=n(14)).Stream=e,e.Readable=e,e.Writable=n(11),e.Duplex=n(1),e.Transform=n(18),e.PassThrough=n(30)},function(t,e,n){"use strict";(function(e,r,i){var o=n(7);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=b;var a,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;b.WritableState=_;var u=Object.create(n(5));u.inherits=n(2);var c={deprecate:n(29)},d=n(15),f=n(8).Buffer,h=i.Uint8Array||function(){};var p,m=n(16);function g(){}function _(t,e){a=a||n(1),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,u=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(u||0===u)?u:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===t.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(x,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),x(t,e))}(t,n,r,e,i);else{var s=k(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?l(y,t,n,s,i):y(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function b(t){if(a=a||n(1),!(p.call(b,this)||this instanceof a))return new b(t);this._writableState=new _(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function v(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function y(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),x(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)i[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;i.allBuffers=l,v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,d=n.callback;if(v(t,e,!1,e.objectMode?1:u.length,u,c,d),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),x(t,e)}))}function x(t,e){var n=k(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}u.inherits(b,d),_.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(_.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===b&&(t&&t._writableState instanceof _)}})):p=function(t){return t instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=t,f.isBuffer(r)||r instanceof h);return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=g),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,a,r,i,o);return l}(this,i,a,t,e,n)),s},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},b.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,x(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(4),n(6).setImmediate,n(0))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=i;var r=n(9).EventEmitter;function i(){r.call(this)}n(2)(i,r),i.Readable=n(10),i.Writable=n(31),i.Duplex=n(32),i.Transform=n(33),i.PassThrough=n(34),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",l));var s=!1;function a(){s||(s=!0,t.end())}function l(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",u),t.on("error",u),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},function(t,e,n){"use strict";(function(e,r){var i=n(7);t.exports=v;var o,s=n(12);v.ReadableState=b;n(9).EventEmitter;var a=function(t,e){return t.listeners(e).length},l=n(15),u=n(8).Buffer,c=e.Uint8Array||function(){};var d=Object.create(n(5));d.inherits=n(2);var f=n(26),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n(27),g=n(16);d.inherits(v,l);var _=["error","close","destroy","pause","resume"];function b(t,e){t=t||{};var r=e instanceof(o=o||n(1));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(17).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function v(t){if(o=o||n(1),!(this instanceof v))return new v(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function y(t,e,n,r,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}(t,s)):(i||(o=function(t,e){var n;r=e,u.isBuffer(r)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):E(t,s)):w(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),E(t,e)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.push(null),e(t)},v.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),n=!0),y(this,t,e,!1,n)},v.prototype.unshift=function(t){return y(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){return p||(p=n(17).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};function k(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(x,t):x(t))}function x(t){h("emit readable"),t.emit("readable"),T(t)}function E(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(O,t,e))}function O(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function A(t){h("readable nexttick read 0"),t.read(0)}function I(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),T(t),e.flowing&&!e.reading&&t.read(0)}function T(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=u.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(N,e,t))}function N(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}v.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):S(this),null;if(0===(t=k(t,e))&&e.ended)return 0===e.length&&R(this),null;var r,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=k(n,e))),null===(r=t>0?C(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,h("pipe count=%d opts=%j",o.pipesCount,e);var l=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?c:v;function u(e,r){h("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),t.removeListener("close",_),t.removeListener("finish",b),t.removeListener("drain",d),t.removeListener("error",g),t.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",v),n.removeListener("data",m),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||d())}function c(){h("onend"),t.end()}o.endEmitted?i.nextTick(l):n.once("end",l),t.on("unpipe",u);var d=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,T(t))}}(n);t.on("drain",d);var f=!1;var p=!1;function m(e){h("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==D(o.pipes,t))&&!f&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(e){h("onerror",e),v(),t.removeListener("error",g),0===a(t,"error")&&t.emit("error",e)}function _(){t.removeListener("finish",b),v()}function b(){h("onfinish"),t.removeListener("close",_),v()}function v(){h("unpipe"),n.unpipe(t)}return n.on("data",m),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",_),t.once("finish",b),t.emit("pipe",n),o.flowing||(h("pipe resume"),n.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=D(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},v.prototype.on=function(t,e){var n=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):i.nextTick(A,this))}return n},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(I,t,e))}(this,t)),this},v.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<_.length;o++)t.on(_[o],this.emit.bind(this,_[o]));return this._read=function(e){h("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=C}).call(this,n(0),n(4))},function(t,e,n){t.exports=n(9).EventEmitter},function(t,e,n){"use strict";var r=n(7);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(8).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=d,e=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=s;var r=n(1),i=Object.create(n(5));function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){l(t,e,n)})):l(this,null,null)}function l(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(2),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){(function(e,n,r,i){t.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,(function(t){return i(e[s][1][t]||t)}),u,u.exports,t,e,n,r)}return n[s].exports}for(var o=!1,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,i,s,a,l,u,c=[],d=0,f=t.length,h=f,p="string"!==r.getTypeOf(t);d<t.length;)h=f-d,i=p?(e=t[d++],n=d<f?t[d++]:0,d<f?t[d++]:0):(e=t.charCodeAt(d++),n=d<f?t.charCodeAt(d++):0,d<f?t.charCodeAt(d++):0),s=e>>2,a=(3&e)<<4|n>>4,l=1<h?(15&n)<<2|i>>6:64,u=2<h?63&i:64,c.push(o.charAt(s)+o.charAt(a)+o.charAt(l)+o.charAt(u));return c.join("")},n.decode=function(t){var e,n,r,s,a,l,u=0,c=0,d="data:";if(t.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var f,h=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&h--,t.charAt(t.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|h):new Array(0|h);u<t.length;)e=o.indexOf(t.charAt(u++))<<2|(s=o.indexOf(t.charAt(u++)))>>4,n=(15&s)<<4|(a=o.indexOf(t.charAt(u++)))>>2,r=(3&a)<<6|(l=o.indexOf(t.charAt(u++))),f[c++]=e,64!==a&&(f[c++]=n),64!==l&&(f[c++]=r);return f}},{"./support":30,"./utils":32}],2:[function(t,e,n){"use strict";var r=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var t=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new s("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){"use strict";var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(t){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){"use strict";var r=t("./utils"),i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==r.getTypeOf(t)?function(t,e,n,r){var o=i,s=0+n;t^=-1;for(var a=0;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}(0|e,t,t.length):function(t,e,n,r){var o=i,s=0+n;t^=-1;for(var a=0;a<s;a++)t=t>>>8^o[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:r}},{lie:37}],7:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),o=t("./utils"),s=t("./stream/GenericWorker"),a=r?"uint8array":"array";function l(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new l("Deflate",t)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){"use strict";function r(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r}function i(t,e,n,i,s,c){var d,f,h=t.file,p=t.compression,m=c!==a.utf8encode,g=o.transformTo("string",c(h.name)),_=o.transformTo("string",a.utf8encode(h.name)),b=h.comment,v=o.transformTo("string",c(b)),y=o.transformTo("string",a.utf8encode(b)),w=_.length!==h.name.length,k=y.length!==b.length,S="",x="",E="",O=h.dir,A=h.date,I={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(I.crc32=t.crc32,I.compressedSize=t.compressedSize,I.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),m||!w&&!k||(T|=2048);var C=0,R=0;O&&(C|=16),"UNIX"===s?(R=798,C|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(h.unixPermissions,O)):(R=20,C|=function(t){return 63&(t||0)}(h.dosPermissions)),d=A.getUTCHours(),d<<=6,d|=A.getUTCMinutes(),d<<=5,d|=A.getUTCSeconds()/2,f=A.getUTCFullYear()-1980,f<<=4,f|=A.getUTCMonth()+1,f<<=5,f|=A.getUTCDate(),w&&(x=r(1,1)+r(l(g),4)+_,S+="up"+r(x.length,2)+x),k&&(E=r(1,1)+r(l(v),4)+y,S+="uc"+r(E.length,2)+E);var N="";return N+="\n\0",N+=r(T,2),N+=p.magic,N+=r(d,2),N+=r(f,2),N+=r(I.crc32,4),N+=r(I.compressedSize,4),N+=r(I.uncompressedSize,4),N+=r(g.length,2),N+=r(S.length,2),{fileRecord:u.LOCAL_FILE_HEADER+N+g+S,dirRecord:u.CENTRAL_FILE_HEADER+r(R,2)+N+r(v.length,2)+"\0\0\0\0"+r(C,4)+r(i,4)+g+S+v}}var o=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),l=t("../crc32"),u=t("../signature");function c(t,e,n,r){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,s),c.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,i=function(t,e,n,i,s){var a=o.transformTo("string",s(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(t,2)+r(t,2)+r(e,4)+r(n,4)+r(a.length,2)+a}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},c.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},c.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){"use strict";var r=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new i(e.streamFiles,n,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,n){s++;var i=function(t,e){var n=t||e,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},l=n.dir,u=n.date;n._compressWorker(i,a).withStreamInfo("file",{name:t,dir:l,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.0",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=t("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./external"),o=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function u(t){return new i.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new a);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=r.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new s(e);return n.load(t),n})).then((function(t){var n=[i.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var o=0;o<r.length;o++)n.push(u(r[o]));return i.Promise.all(n)})).then((function(t){for(var i=t.shift(),o=i.files,s=0;s<o.length;s++){var a=o[s],l=a.fileNameStr,u=r.resolve(a.fileNameStr);n.file(u,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders}),a.dir||(n.file(u).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../stream/GenericWorker");function o(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}r.inherits(o,i),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){"use strict";var r=t("readable-stream").Readable;function i(t,e,n){r.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),n&&n(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,n,r){"use strict";n.exports={isNode:void 0!==e,newBufferFrom:function(t,n){if(e.from&&e.from!==Uint8Array.from)return e.from(t,n);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new e(t,n)},allocBuffer:function(t){if(e.alloc)return e.alloc(t);var n=new e(t);return n.fill(0),n},isBuffer:function(t){return e.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){"use strict";function r(t,e,n){var r,i=o.getTypeOf(e),a=o.extend(n||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=m(t)),a.createFolders&&(r=p(t))&&g.call(this,r,!0);var d,_="string"===i&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!_),(e instanceof u&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",i="string"),d=e instanceof u||e instanceof s?e:f.isNode&&f.isStream(e)?new h(t,e):o.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var b=new c(t,d,a);this.files[t]=b}var i=t("./utf8"),o=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),l=t("./defaults"),u=t("./compressedObject"),c=t("./zipObject"),d=t("./generate"),f=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},g=function(t,e){return e=void 0!==e?e:l.createFolders,t=m(t),this.files[t]||r.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function _(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r)},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,r.call(this,t,e,n),this;if(_(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(_(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=g.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=d.generateWorker(this,n,r)}catch(t){(e=new s("error")).error(t)}return new a(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){"use strict";var r=t("./DataReader");function i(t){r.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){"use strict";var r=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,n){"use strict";var r=t("./Uint8ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){"use strict";var r=t("./DataReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){"use strict";var r=t("./ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../support"),o=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new a(t):i.uint8array?new l(r.transformTo("uint8array",t)):new o(r.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../utils");function o(t){r.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(o,r),o.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,r),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}r.inherits(o,i),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=r.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){"use strict";function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=r},{}],29:[function(t,n,r){"use strict";var i=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),a=t("../base64"),l=t("../support"),u=t("../external"),c=null;if(l.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function d(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,i.checkSupport(r),this._worker=t.pipe(new o(r)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}d.prototype={accumulate:function(t){return function(t,n){return new u.Promise((function(r,o){var s=[],l=t._internalType,u=t._outputType,c=t._mimeType;t.on("data",(function(t,e){s.push(t),n&&n(e)})).on("error",(function(t){s=[],o(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return a.encode(e);default:return i.transformTo(t,e)}}(u,function(t,n){var r,i=0,o=null,s=0;for(r=0;r<n.length;r++)s+=n[r].length;switch(t){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(s),r=0;r<n.length;r++)o.set(n[r],i),i+=n[r].length;return o;case"nodebuffer":return e.concat(n);default:throw new Error("concat : unsupported type '"+t+"'")}}(l,s),c);r(t)}catch(t){o(t)}s=[]})).resume()}))}(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},t)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==e,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),r.blob=0===o.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){"use strict";for(var r=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){s.call(this,"utf-8 decode"),this.leftOver=null}function c(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(t){return i.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,r,o,s,a=t.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=i.uint8array?new Uint8Array(l):new Array(l),o=s=0;s<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e}(t)},n.utf8decode=function(t){return i.nodebuffer?r.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,i,o,s=t.length,l=new Array(2*s);for(e=n=0;e<s;)if((i=t[e++])<128)l[n++]=i;else if(4<(o=a[i]))l[n++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&e<s;)i=i<<6|63&t[e++],o--;1<o?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(t=r.transformTo(i.uint8array?"uint8array":"array",t))},r.inherits(u,s),u.prototype.processChunk=function(t){var e=r.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}(e),l=e;s!==e.length&&(i.uint8array?(l=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(l=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:n.utf8decode(l),meta:t.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(c,s),c.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";var i=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),a=t("./external");function l(t){return t}function u(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}t("setimmediate"),r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,n){var r=[],i=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(t){return!1}}()}};function d(t){var e=65536,n=r.getTypeOf(t),i=!0;if("uint8array"===n?i=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return c.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return c.stringifyByChar(t)}function f(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}r.applyFromCharCode=d;var h={};h.string={string:l,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return h.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,s.allocBuffer(t.length))}},h.array={string:d,array:l,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(t)}},h.arraybuffer={string:function(t){return d(new Uint8Array(t))},array:function(t){return f(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:l,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(new Uint8Array(t))}},h.uint8array={string:d,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:l,nodebuffer:function(t){return s.newBufferFrom(t)}},h.nodebuffer={string:d,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return h.nodebuffer.uint8array(t).buffer},uint8array:function(t){return f(t,new Uint8Array(t.length))},nodebuffer:l},r.transformTo=function(t,e){if(e=e||"",!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return h[n][t](e)},r.resolve=function(t){for(var e=t.split("/"),n=[],r=0;r<e.length;r++){var i=e[r];"."===i||""===i&&0!==r&&r!==e.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&s.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},r.delay=function(t,e,r){n((function(){t.apply(r||null,e||[])}))},r.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},r.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},r.prepareContent=function(t,e,n,s,l){return a.Promise.resolve(e).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(e){var c=r.getTypeOf(e);return c?("arraybuffer"===c?e=r.transformTo("uint8array",e):"string"===c&&(l?e=o.decode(e):n&&!0!==s&&(e=function(t){return u(t,i.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),s=t("./zipEntry"),a=(t("./utf8"),t("./support"));function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",n=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(0<r)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=r(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),l=t("./compressions"),u=t("./support");function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r};t.setIndex(i)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=r(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=r(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){"use strict";function r(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),l=t("./stream/GenericWorker");r.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(e=e.pipe(new s.Utf8EncodeWorker)),!o&&r&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new l("error")).error(t)}return new i(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)r.prototype[u[d]]=c;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){"use strict";var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(c),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var t,e;r=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}r=!1}e.exports=function(t){1!==u.push(t)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){"use strict";var r=t("immediate");function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&h(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(t,e,n){r((function(){var r;try{r=e(n)}catch(r){return o.reject(t,r)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function h(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var s=p((function(){e(i,r)}));"error"===s.status&&r(s.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===a?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){d(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){d(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(f,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)h(t,r);else{t.state=a,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},u.reject=function(t){var e=new this(i);return o.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,u=new this(i);++l<n;)c(t[l],l);return u;function c(t,i){e.resolve(t).then((function(t){s[i]=t,++a!==n||r||(r=!0,o.resolve(u,s))}),(function(t){r||(r=!0,o.reject(u,t))}))}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r,s=-1,a=new this(i);++s<e;)r=t[s],this.resolve(r).then((function(t){n||(n=!0,o.resolve(a,t))}),(function(t){n||(n=!0,o.reject(a,t))}));return a}},{immediate:36}],38:[function(t,e,n){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){"use strict";var r=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(s[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=r.deflateSetDictionary(this.strm,c)))throw new Error(s[n]);this._dict_set=!0}}function c(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}u.prototype.push=function(t,e){var n,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=r.deflate(a,s))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==s||(this.onEnd(0),!(a.avail_out=0))},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=u,n.deflate=c,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){"use strict";var r=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),l=t("./zlib/zstream"),u=t("./zlib/gzheader"),c=Object.prototype.toString;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function f(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(t,e){var n,a,l,u,d,f,h=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?h.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(p),h.next_out=0,h.avail_out=p),(n=r.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&m&&(f="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,f)),n===s.Z_BUF_ERROR&&!0===g&&(n=s.Z_OK,g=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&n!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(h.output,h.next_out),u=h.next_out-l,d=o.buf2string(h.output,l),h.next_out=u,h.avail_out=p-u,u&&i.arraySet(h.output,h.output,l,u,0),this.onData(d)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(g=!0)}while((0<h.avail_in||0===h.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(h.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=d,n.inflate=f,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,s;for(e=r=0,n=t.length;e<n;e++)r+=t[e].length;for(s=new Uint8Array(r),e=i=0,n=t.length;e<n;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(t,e,n){"use strict";var r=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}s[254]=s[254]=1,n.string2buf=function(t){var e,n,i,o,s,a=t.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),o=s=0;s<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e},n.buf2binstring=function(t){return l(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,i,o,a=e||t.length,u=new Array(2*a);for(n=r=0;n<a;)if((i=t[n++])<128)u[r++]=i;else if(4<(o=s[i]))u[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<a;)i=i<<6|63&t[n++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return l(u,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(i=i+e[r++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,n){"use strict";var r,i=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),l=t("./messages"),u=-2,c=258,d=262,f=113;function h(t,e){return t.msg=l[e],e}function p(t){return(t<<1)-(4<t?9:0)}function m(t){for(var e=t.length;0<=--e;)t[e]=0}function g(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function _(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,g(t.strm)}function b(t,e){t.pending_buf[t.pending++]=e}function v(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function y(t,e){var n,r,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-d?t.strstart-(t.w_size-d):0,u=t.window,f=t.w_mask,h=t.prev,p=t.strstart+c,m=u[o+s-1],g=u[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(n=e)+s]===g&&u[n+s-1]===m&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<p);if(r=c-(p-o),o=p-c,s<r){if(t.match_start=e,a<=(s=r))break;m=u[o+s-1],g=u[o+s]}}}while((e=h[e&f])>l&&0!=--i);return s<=t.lookahead?s:t.lookahead}function w(t){var e,n,r,o,l,u,c,f,h,p,m=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=m+(m-d)){for(i.arraySet(t.window,t.window,m,m,0),t.match_start-=m,t.strstart-=m,t.block_start-=m,e=n=t.hash_size;r=t.head[--e],t.head[e]=m<=r?r-m:0,--n;);for(e=n=m;r=t.prev[--e],t.prev[e]=m<=r?r-m:0,--n;);o+=m}if(0===t.strm.avail_in)break;if(u=t.strm,c=t.window,f=t.strstart+t.lookahead,p=void 0,(h=o)<(p=u.avail_in)&&(p=h),n=0===p?0:(u.avail_in-=p,i.arraySet(c,u.input,u.next_in,p,f),1===u.state.wrap?u.adler=s(u.adler,c,p,f):2===u.state.wrap&&(u.adler=a(u.adler,c,p,f)),u.next_in+=p,u.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<d&&0!==t.strm.avail_in)}function k(t,e){for(var n,r;;){if(t.lookahead<d){if(w(t),t.lookahead<d&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-d&&(t.match_length=y(t,n)),t.match_length>=3)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(_(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(_(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_(t,!1),0===t.strm.avail_out)?1:2}function S(t,e){for(var n,r,i;;){if(t.lookahead<d){if(w(t),t.lookahead<d&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-d&&(t.match_length=y(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-3,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(_(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=o._tr_tally(t,0,t.window[t.strstart-1]))&&_(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(_(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_(t,!1),0===t.strm.avail_out)?1:2}function x(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function O(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:f,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):h(t,u)}function A(t){var e=O(t);return 0===e&&function(t){t.window_size=2*t.w_size,m(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function I(t,e,n,r,o,s){if(!t)return u;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),o<1||9<o||8!==n||r<8||15<r||e<0||9<e||s<0||4<s)return h(t,u);8===r&&(r=9);var l=new E;return(t.state=l).strm=t,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=n,A(t)}r=[new x(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(w(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,_(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-d&&(_(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(_(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(_(t,!1),t.strm.avail_out),1)})),new x(4,4,8,4,k),new x(4,5,16,8,k),new x(4,6,32,32,k),new x(4,4,16,16,S),new x(8,16,32,32,S),new x(8,16,128,128,S),new x(8,32,128,256,S),new x(32,128,258,1024,S),new x(32,258,258,4096,S)],n.deflateInit=function(t,e){return I(t,e,8,15,8,0)},n.deflateInit2=I,n.deflateReset=A,n.deflateResetKeep=O,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,0):u},n.deflate=function(t,e){var n,i,s,l;if(!t||!t.state||5<e||e<0)return t?h(t,u):u;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return h(t,0===t.avail_out?-5:u);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,b(i,31),b(i,139),b(i,8),i.gzhead?(b(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),b(i,255&i.gzhead.time),b(i,i.gzhead.time>>8&255),b(i,i.gzhead.time>>16&255),b(i,i.gzhead.time>>24&255),b(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),b(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(b(i,255&i.gzhead.extra.length),b(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(b(i,0),b(i,0),b(i,0),b(i,0),b(i,0),b(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),b(i,3),i.status=f);else{var d=8+(i.w_bits-8<<4)<<8;d|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=f,v(i,d),0!==i.strstart&&(v(i,t.adler>>>16),v(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),g(t),s=i.pending,i.pending!==i.pending_buf_size));)b(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),g(t),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,b(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),g(t),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,b(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&g(t),i.pending+2<=i.pending_buf_size&&(b(i,255&t.adler),b(i,t.adler>>8&255),t.adler=0,i.status=f)):i.status=f),0!==i.pending){if(g(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(n)&&4!==e)return h(t,-5);if(666===i.status&&0!==t.avail_in)return h(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var y=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(w(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(_(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(_(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,r,i,s,a=t.window;;){if(t.lookahead<=c){if(w(t),t.lookahead<=c&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){s=t.strstart+c;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);t.match_length=c-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(_(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(_(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_(t,!1),0===t.strm.avail_out)?1:2}(i,e):r[i.level].func(i,e);if(3!==y&&4!==y||(i.status=666),1===y||3===y)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===y&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),g(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(b(i,255&t.adler),b(i,t.adler>>8&255),b(i,t.adler>>16&255),b(i,t.adler>>24&255),b(i,255&t.total_in),b(i,t.total_in>>8&255),b(i,t.total_in>>16&255),b(i,t.total_in>>24&255)):(v(i,t.adler>>>16),v(i,65535&t.adler)),g(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==f&&666!==e?h(t,u):(t.state=null,e===f?h(t,-3):0):u},n.deflateSetDictionary=function(t,e){var n,r,o,a,l,c,d,f,h=e.length;if(!t||!t.state)return u;if(2===(a=(n=t.state).wrap)||1===a&&42!==n.status||n.lookahead)return u;for(1===a&&(t.adler=s(t.adler,e,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,e,h-n.w_size,n.w_size,0),e=f,h=n.w_size),l=t.avail_in,c=t.next_in,d=t.input,t.avail_in=h,t.next_in=0,t.input=e,w(n);n.lookahead>=3;){for(r=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=2,w(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=c,t.input=d,t.avail_in=l,n.wrap=a,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,o,s,a,l,u,c,d,f,h,p,m,g,_,b,v,y,w,k,S,x,E,O;n=t.state,r=t.next_in,E=t.input,i=r+(t.avail_in-5),o=t.next_out,O=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,d=n.wnext,f=n.window,h=n.hold,p=n.bits,m=n.lencode,g=n.distcode,_=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;t:do{p<15&&(h+=E[r++]<<p,p+=8,h+=E[r++]<<p,p+=8),v=m[h&_];e:for(;;){if(h>>>=y=v>>>24,p-=y,0==(y=v>>>16&255))O[o++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(h&(1<<y)-1)];continue e}if(32&y){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&v,(y&=15)&&(p<y&&(h+=E[r++]<<p,p+=8),w+=h&(1<<y)-1,h>>>=y,p-=y),p<15&&(h+=E[r++]<<p,p+=8,h+=E[r++]<<p,p+=8),v=g[h&b];n:for(;;){if(h>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=g[(65535&v)+(h&(1<<y)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(k=65535&v,p<(y&=15)&&(h+=E[r++]<<p,(p+=8)<y&&(h+=E[r++]<<p,p+=8)),l<(k+=h&(1<<y)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=y,p-=y,(y=o-s)<k){if(c<(y=k-y)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(x=f,(S=0)===d){if(S+=u-y,y<w){for(w-=y;O[o++]=f[S++],--y;);S=o-k,x=O}}else if(d<y){if(S+=u+d-y,(y-=d)<w){for(w-=y;O[o++]=f[S++],--y;);if(S=0,d<w){for(w-=y=d;O[o++]=f[S++],--y;);S=o-k,x=O}}}else if(S+=d-y,y<w){for(w-=y;O[o++]=f[S++],--y;);S=o-k,x=O}for(;2<w;)O[o++]=x[S++],O[o++]=x[S++],O[o++]=x[S++],w-=3;w&&(O[o++]=x[S++],1<w&&(O[o++]=x[S++]))}else{for(S=o-k;O[o++]=O[S++],O[o++]=O[S++],O[o++]=O[S++],2<(w-=3););w&&(O[o++]=O[S++],1<w&&(O[o++]=O[S++]))}break}}break}}while(r<i&&o<a);r-=w=p>>3,h&=(1<<(p-=w<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=h,n.bits=p}},{}],49:[function(t,e,n){"use strict";var r=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),l=-2;function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):l}function f(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,d(t)):l}function h(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?l:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,f(t))):l}function p(t,e){var n,r;return t?(r=new c,(t.state=r).window=null,0!==(n=h(t,e))&&(t.state=null),n):l}var m,g,_=!0;function b(t){if(_){var e;for(m=new r.Buf32(512),g=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,g,0,t.work,{bits:5}),_=!1}t.lencode=m,t.lenbits=9,t.distcode=g,t.distbits=5}function v(t,e,n,i){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),i>=s.wsize?(r.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(o=s.wsize-s.wnext)&&(o=i),r.arraySet(s.window,e,n-i,o,s.wnext),(i-=o)?(r.arraySet(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}n.inflateReset=f,n.inflateReset2=h,n.inflateResetKeep=d,n.inflateInit=function(t){return p(t,15)},n.inflateInit2=p,n.inflate=function(t,e){var n,c,d,f,h,p,m,g,_,y,w,k,S,x,E,O,A,I,T,C,R,N,D,$,L=0,z=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return l;12===(n=t.state).mode&&(n.mode=13),h=t.next_out,d=t.output,m=t.avail_out,f=t.next_in,c=t.input,p=t.avail_in,g=n.hold,_=n.bits,y=p,w=m,N=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;_<16;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(2&n.wrap&&35615===g){z[n.check=0]=255&g,z[1]=g>>>8&255,n.check=o(n.check,z,2,0),_=g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",n.mode=30;break}if(_-=4,R=8+(15&(g>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<R,t.adler=n.check=1,n.mode=512&g?10:12,_=g=0;break;case 2:for(;_<16;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(n.flags=g,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(z[0]=255&g,z[1]=g>>>8&255,n.check=o(n.check,z,2,0)),_=g=0,n.mode=3;case 3:for(;_<32;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}n.head&&(n.head.time=g),512&n.flags&&(z[0]=255&g,z[1]=g>>>8&255,z[2]=g>>>16&255,z[3]=g>>>24&255,n.check=o(n.check,z,4,0)),_=g=0,n.mode=4;case 4:for(;_<16;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(z[0]=255&g,z[1]=g>>>8&255,n.check=o(n.check,z,2,0)),_=g=0,n.mode=5;case 5:if(1024&n.flags){for(;_<16;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(z[0]=255&g,z[1]=g>>>8&255,n.check=o(n.check,z,2,0)),_=g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(k=n.length)&&(k=p),k&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,f,k,R)),512&n.flags&&(n.check=o(n.check,c,k,f)),p-=k,f+=k,n.length-=k),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break t;for(k=0;R=c[f+k++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R)),R&&k<p;);if(512&n.flags&&(n.check=o(n.check,c,k,f)),p-=k,f+=k,R)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break t;for(k=0;R=c[f+k++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R)),R&&k<p;);if(512&n.flags&&(n.check=o(n.check,c,k,f)),p-=k,f+=k,R)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;_<16;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(g!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}_=g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;_<32;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}t.adler=n.check=u(g),_=g=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=h,t.avail_out=m,t.next_in=f,t.avail_in=p,n.hold=g,n.bits=_,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){g>>>=7&_,_-=7&_,n.mode=27;break}for(;_<3;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}switch(n.last=1&g,_-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(b(n),n.mode=20,6!==e)break;g>>>=2,_-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}g>>>=2,_-=2;break;case 14:for(g>>>=7&_,_-=7&_;_<32;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,_=g=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(k=n.length){if(p<k&&(k=p),m<k&&(k=m),0===k)break t;r.arraySet(d,c,f,k,h),p-=k,f+=k,m-=k,h+=k,n.length-=k;break}n.mode=12;break;case 17:for(;_<14;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(n.nlen=257+(31&g),g>>>=5,_-=5,n.ndist=1+(31&g),g>>>=5,_-=5,n.ncode=4+(15&g),g>>>=4,_-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;_<3;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}n.lens[B[n.have++]]=7&g,g>>>=3,_-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},N=a(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,N){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(L=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,A=65535&L,!((E=L>>>24)<=_);){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(A<16)g>>>=E,_-=E,n.lens[n.have++]=A;else{if(16===A){for($=E+2;_<$;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(g>>>=E,_-=E,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}R=n.lens[n.have-1],k=3+(3&g),g>>>=2,_-=2}else if(17===A){for($=E+3;_<$;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}_-=E,R=0,k=3+(7&(g>>>=E)),g>>>=3,_-=3}else{for($=E+7;_<$;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}_-=E,R=0,k=11+(127&(g>>>=E)),g>>>=7,_-=7}if(n.have+k>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;k--;)n.lens[n.have++]=R}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},N=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,N){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},N=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,N){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=p&&258<=m){t.next_out=h,t.avail_out=m,t.next_in=f,t.avail_in=p,n.hold=g,n.bits=_,s(t,w),h=t.next_out,d=t.output,m=t.avail_out,f=t.next_in,c=t.input,p=t.avail_in,g=n.hold,_=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;O=(L=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,A=65535&L,!((E=L>>>24)<=_);){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(O&&0==(240&O)){for(I=E,T=O,C=A;O=(L=n.lencode[C+((g&(1<<I+T)-1)>>I)])>>>16&255,A=65535&L,!(I+(E=L>>>24)<=_);){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}g>>>=I,_-=I,n.back+=I}if(g>>>=E,_-=E,n.back+=E,n.length=A,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=12;break}if(64&O){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for($=n.extra;_<$;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,_-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(L=n.distcode[g&(1<<n.distbits)-1])>>>16&255,A=65535&L,!((E=L>>>24)<=_);){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(0==(240&O)){for(I=E,T=O,C=A;O=(L=n.distcode[C+((g&(1<<I+T)-1)>>I)])>>>16&255,A=65535&L,!(I+(E=L>>>24)<=_);){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}g>>>=I,_-=I,n.back+=I}if(g>>>=E,_-=E,n.back+=E,64&O){t.msg="invalid distance code",n.mode=30;break}n.offset=A,n.extra=15&O,n.mode=24;case 24:if(n.extra){for($=n.extra;_<$;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,_-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break t;if(k=w-m,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}S=k>n.wnext?(k-=n.wnext,n.wsize-k):n.wnext-k,k>n.length&&(k=n.length),x=n.window}else x=d,S=h-n.offset,k=n.length;for(m<k&&(k=m),m-=k,n.length-=k;d[h++]=x[S++],--k;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break t;d[h++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;_<32;){if(0===p)break t;p--,g|=c[f++]<<_,_+=8}if(w-=m,t.total_out+=w,n.total+=w,w&&(t.adler=n.check=n.flags?o(n.check,d,w,h-w):i(n.check,d,w,h-w)),w=m,(n.flags?g:u(g))!==n.check){t.msg="incorrect data check",n.mode=30;break}_=g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;_<32;){if(0===p)break t;p--,g+=c[f++]<<_,_+=8}if(g!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}_=g=0}n.mode=29;case 29:N=1;break t;case 30:N=-3;break t;case 31:return-4;case 32:default:return l}return t.next_out=h,t.avail_out=m,t.next_in=f,t.avail_in=p,n.hold=g,n.bits=_,(n.wsize||w!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&v(t,t.output,t.next_out,w-t.avail_out)?(n.mode=31,-4):(y-=t.avail_in,w-=t.avail_out,t.total_in+=y,t.total_out+=w,n.total+=w,n.wrap&&w&&(t.adler=n.check=n.flags?o(n.check,d,w,t.next_out-w):i(n.check,d,w,t.next_out-w)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==y&&0===w||4===e)&&0===N&&(N=-5),N)},n.inflateEnd=function(t){if(!t||!t.state)return l;var e=t.state;return e.window&&(e.window=null),t.state=null,0},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?l:((n.head=e).done=!1,0):l},n.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?l:11===n.mode&&i(1,e,r,0)!==n.check?-3:v(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){"use strict";var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,l,u,c,d,f){var h,p,m,g,_,b,v,y,w,k=f.bits,S=0,x=0,E=0,O=0,A=0,I=0,T=0,C=0,R=0,N=0,D=null,$=0,L=new r.Buf16(16),z=new r.Buf16(16),B=null,P=0;for(S=0;S<=15;S++)L[S]=0;for(x=0;x<l;x++)L[e[n+x]]++;for(A=k,O=15;1<=O&&0===L[O];O--);if(O<A&&(A=O),0===O)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(E=1;E<O&&0===L[E];E++);for(A<E&&(A=E),S=C=1;S<=15;S++)if(C<<=1,(C-=L[S])<0)return-1;if(0<C&&(0===t||1!==O))return-1;for(z[1]=0,S=1;S<15;S++)z[S+1]=z[S]+L[S];for(x=0;x<l;x++)0!==e[n+x]&&(d[z[e[n+x]]++]=x);if(b=0===t?(D=B=d,19):1===t?(D=i,$-=257,B=o,P-=257,256):(D=s,B=a,-1),S=E,_=c,T=x=N=0,m=-1,g=(R=1<<(I=A))-1,1===t&&852<R||2===t&&592<R)return 1;for(;;){for(v=S-T,w=d[x]<b?(y=0,d[x]):d[x]>b?(y=B[P+d[x]],D[$+d[x]]):(y=96,0),h=1<<S-T,E=p=1<<I;u[_+(N>>T)+(p-=h)]=v<<24|y<<16|w|0,0!==p;);for(h=1<<S-1;N&h;)h>>=1;if(0!==h?(N&=h-1,N+=h):N=0,x++,0==--L[S]){if(S===O)break;S=e[n+d[x]]}if(A<S&&(N&g)!==m){for(0===T&&(T=A),_+=E,C=1<<(I=S-T);I+T<O&&!((C-=L[I+T])<=0);)I++,C<<=1;if(R+=1<<I,1===t&&852<R||2===t&&592<R)return 1;u[m=N&g]=A<<24|I<<16|_-c|0}}return 0!==N&&(u[_+N]=S-T<<24|64<<16|0),f.bits=A,0}},{"../utils/common":41}],51:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){"use strict";var r=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var o=256,s=286,a=30,l=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);i(h);var p=new Array(60);i(p);var m=new Array(512);i(m);var g=new Array(256);i(g);var _=new Array(29);i(_);var b,v,y,w=new Array(a);function k(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function S(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function x(t){return t<256?m[t]:m[256+(t>>>7)]}function E(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function O(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function A(t,e,n){O(t,n[2*e],n[2*e+1])}function I(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function T(t,e,n){var r,i,o=new Array(16),s=0;for(r=1;r<=l;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=I(o[a]++,a))}}function C(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function R(t){8<t.bi_valid?E(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function N(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function D(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&N(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!N(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function $(t,e,n){var r,i,s,a,l=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===r?A(t,i,e):(A(t,(s=g[i])+o+1,e),0!==(a=u[s])&&O(t,i-=_[s],a),A(t,s=x(--r),n),0!==(a=c[s])&&O(t,r-=w[s],a)),l<t.last_lit;);A(t,256,e)}function L(t,e){var n,r,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;1<=n;n--)D(t,o,n);for(i=u;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],D(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,D(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,s,a,u=e.dyn_tree,c=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,m=e.stat_desc.max_length,g=0;for(o=0;o<=l;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)m<(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)&&(o=m,g++),u[2*r+1]=o,c<r||(t.bl_count[o]++,s=0,p<=r&&(s=h[r-p]),a=u[2*r],t.opt_len+=a*(o+s),f&&(t.static_len+=a*(d[2*r+1]+s)));if(0!==g){do{for(o=m-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[m]--,g-=2}while(0<g);for(o=m;0!==o;o--)for(r=t.bl_count[o];0!==r;)c<(i=t.heap[--n])||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),T(o,c,t.bl_count)}function z(t,e,n){var r,i,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=e[2*(r+1)+1],++a<l&&i===s||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=i,u=(a=0)===s?(l=138,3):i===s?(l=6,3):(l=7,4))}function B(t,e,n){var r,i,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),r=0;r<=n;r++)if(i=s,s=e[2*(r+1)+1],!(++a<l&&i===s)){if(a<u)for(;A(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==o&&(A(t,i,t.bl_tree),a--),A(t,16,t.bl_tree),O(t,a-3,2)):a<=10?(A(t,17,t.bl_tree),O(t,a-3,3)):(A(t,18,t.bl_tree),O(t,a-11,7));o=i,u=(a=0)===s?(l=138,3):i===s?(l=6,3):(l=7,4)}}i(w);var P=!1;function M(t,e,n,i){O(t,0+(i?1:0),3),function(t,e,n,i){R(t),E(t,n),E(t,~n),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}n._tr_init=function(t){P||(function(){var t,e,n,r,i,o=new Array(16);for(r=n=0;r<28;r++)for(_[r]=n,t=0;t<1<<u[r];t++)g[n++]=r;for(g[n-1]=r,r=i=0;r<16;r++)for(w[r]=i,t=0;t<1<<c[r];t++)m[i++]=r;for(i>>=7;r<a;r++)for(w[r]=i<<7,t=0;t<1<<c[r]-7;t++)m[256+i++]=r;for(e=0;e<=l;e++)o[e]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,o[8]++;for(;t<=255;)h[2*t+1]=9,t++,o[9]++;for(;t<=279;)h[2*t+1]=7,t++,o[7]++;for(;t<=287;)h[2*t+1]=8,t++,o[8]++;for(T(h,287,o),t=0;t<a;t++)p[2*t+1]=5,p[2*t]=I(t,5);b=new k(h,u,257,s,l),v=new k(p,c,0,a,l),y=new k(new Array(0),d,0,19,7)}(),P=!0),t.l_desc=new S(t.dyn_ltree,b),t.d_desc=new S(t.dyn_dtree,v),t.bl_desc=new S(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,C(t)},n._tr_stored_block=M,n._tr_flush_block=function(t,e,n,r){var i,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),L(t,t.l_desc),L(t,t.d_desc),a=function(t){var e;for(z(t,t.dyn_ltree,t.l_desc.max_code),z(t,t.dyn_dtree,t.d_desc.max_code),L(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*f[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?M(t,e,n,r):4===t.strategy||s===i?(O(t,2+(r?1:0),3),$(t,h,p)):(O(t,4+(r?1:0),3),function(t,e,n,r){var i;for(O(t,e-257,5),O(t,n-1,5),O(t,r-4,4),i=0;i<r;i++)O(t,t.bl_tree[2*f[i]+1],3);B(t,t.dyn_ltree,e-1),B(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),$(t,t.dyn_ltree,t.dyn_dtree)),C(t),r&&R(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(g[n]+o+1)]++,t.dyn_dtree[2*x(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){O(t,2,3),A(t,256,h),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){(function(t){!function(t,e){"use strict";if(!t.setImmediate){var n,r,o,s,a=1,l={},u=!1,c=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,n="[object process]"==={}.toString.call(t.process)?function(t){i.nextTick((function(){h(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(s="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",p,!1):t.attachEvent("onmessage",p),function(e){t.postMessage(s+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){h(t.data)},function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):function(t){setTimeout(h,0,t)},d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return l[a]=i,n(a),a++},d.clearImmediate=f}function f(t){delete l[t]}function h(t){if(u)setTimeout(h,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{f(t),u=!1}}}}function p(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&h(+e.data.slice(s.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}).call(this,n(3).Buffer,n(6).setImmediate,n(0),n(4))},function(t,e,n){"use strict";(function(t,r){var i=n(13);class o extends Error{constructor(e,n,...r){Array.isArray(n)&&(n=n.join(" ")),super(n),void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,o),this.code=e;for(const e of r)for(const n in e){const r=e[n];this[n]=t.isBuffer(r)?r.toString():null==r?r:JSON.parse(JSON.stringify(r))}}}const s=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},a=".".charCodeAt(0),l=/\\(\\)?/g,u=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,f=function(t){const e=typeof t;return"symbol"===e||"object"===e&&t&&"[object Symbol]"===function(t){return Object.prototype.toString.call(t)}(t)},h=function(t,e){return Array.isArray(t)?t:function(t,e){if(Array.isArray(t))return!1;const n=typeof t;return!("number"!==n&&"symbol"!==n&&"boolean"!==n&&t&&!f(t))||(d.test(t)||!c.test(t)||null!=e&&t in Object(e))}(t,e)?[t]:function(t){const e=[];return t.charCodeAt(0)===a&&e.push(""),t.replace(u,(function(t,n,r,i){let o=t;r?o=i.replace(l,"$1"):n&&(o=n.trim()),e.push(o)})),e}(t)},p=function(t){if("string"==typeof t||f(t))return t;const e=""+t;return"0"==e&&1/t==-INFINITY?"-0":e},m=function(t,e){let n=0;const r=(e=h(e,t)).length;for(;null!=t&&n<r;)t=t[p(e[n++])];return n&&n===r?t:void 0},g=function(t){if(null==t)return[void 0,void 0];if("object"!=typeof t)return[Error('Invalid option "columns": expect an array or an object')];if(Array.isArray(t)){const e=[];for(const n of t)if("string"==typeof n)e.push({key:n,header:n});else{if("object"!=typeof n||null===n||Array.isArray(n))return[Error("Invalid column definition: expect a string or an object")];if(!n.key)return[Error('Invalid column definition: property "key" is required')];void 0===n.header&&(n.header=n.key),e.push(n)}t=e}else{const e=[];for(const n in t)e.push({key:n,header:t[n]});t=e}return[void 0,t]},_=function(e){const n={};for(const t in e)n[(r=t,r.replace(/([A-Z])/g,(function(t,e){return"_"+e.toLowerCase()})))]=e[t];var r;if(void 0===n.bom||null===n.bom||!1===n.bom)n.bom=!1;else if(!0!==n.bom)return[new o("CSV_OPTION_BOOLEAN_INVALID_TYPE",["option `bom` is optional and must be a boolean value,","got "+JSON.stringify(n.bom)])];if(void 0===n.delimiter||null===n.delimiter)n.delimiter=",";else if(t.isBuffer(n.delimiter))n.delimiter=n.delimiter.toString();else if("string"!=typeof n.delimiter)return[new o("CSV_OPTION_DELIMITER_INVALID_TYPE",["option `delimiter` must be a buffer or a string,","got "+JSON.stringify(n.delimiter)])];if(void 0===n.quote||null===n.quote)n.quote='"';else if(!0===n.quote)n.quote='"';else if(!1===n.quote)n.quote="";else if(t.isBuffer(n.quote))n.quote=n.quote.toString();else if("string"!=typeof n.quote)return[new o("CSV_OPTION_QUOTE_INVALID_TYPE",["option `quote` must be a boolean, a buffer or a string,","got "+JSON.stringify(n.quote)])];if(void 0!==n.quoted&&null!==n.quoted||(n.quoted=!1),void 0===n.escape_formulas||null===n.escape_formulas)n.escape_formulas=!1;else if("boolean"!=typeof n.escape_formulas)return[new o("CSV_OPTION_ESCAPE_FORMULAS_INVALID_TYPE",["option `escape_formulas` must be a boolean,","got "+JSON.stringify(n.escape_formulas)])];if(void 0!==n.quoted_empty&&null!==n.quoted_empty||(n.quoted_empty=void 0),void 0===n.quoted_match||null===n.quoted_match||!1===n.quoted_match?n.quoted_match=null:Array.isArray(n.quoted_match)||(n.quoted_match=[n.quoted_match]),n.quoted_match)for(const t of n.quoted_match){const e=t instanceof RegExp;if(!("string"==typeof t)&&!e)return[Error("Invalid Option: quoted_match must be a string or a regex, got "+JSON.stringify(t))]}if(void 0!==n.quoted_string&&null!==n.quoted_string||(n.quoted_string=!1),void 0!==n.eof&&null!==n.eof||(n.eof=!0),void 0===n.escape||null===n.escape)n.escape='"';else if(t.isBuffer(n.escape))n.escape=n.escape.toString();else if("string"!=typeof n.escape)return[Error("Invalid Option: escape must be a buffer or a string, got "+JSON.stringify(n.escape))];if(n.escape.length>1)return[Error(`Invalid Option: escape must be one character, got ${n.escape.length} characters`)];void 0!==n.header&&null!==n.header||(n.header=!1);const[i,s]=g(n.columns);if(void 0!==i)return[i];if(n.columns=s,void 0!==n.quoted&&null!==n.quoted||(n.quoted=!1),void 0!==n.cast&&null!==n.cast||(n.cast={}),void 0!==n.cast.bigint&&null!==n.cast.bigint||(n.cast.bigint=t=>""+t),void 0!==n.cast.boolean&&null!==n.cast.boolean||(n.cast.boolean=t=>t?"1":""),void 0!==n.cast.date&&null!==n.cast.date||(n.cast.date=t=>""+t.getTime()),void 0!==n.cast.number&&null!==n.cast.number||(n.cast.number=t=>""+t),void 0!==n.cast.object&&null!==n.cast.object||(n.cast.object=t=>JSON.stringify(t)),void 0!==n.cast.string&&null!==n.cast.string||(n.cast.string=function(t){return t}),void 0!==n.on_record&&"function"!=typeof n.on_record)return[Error('Invalid Option: "on_record" must be a function.')];if(void 0===n.record_delimiter||null===n.record_delimiter)n.record_delimiter="\n";else if(t.isBuffer(n.record_delimiter))n.record_delimiter=n.record_delimiter.toString();else if("string"!=typeof n.record_delimiter)return[Error("Invalid Option: record_delimiter must be a buffer or a string, got "+JSON.stringify(n.record_delimiter))];switch(n.record_delimiter){case"unix":n.record_delimiter="\n";break;case"mac":n.record_delimiter="\r";break;case"windows":n.record_delimiter="\r\n";break;case"ascii":n.record_delimiter="";break;case"unicode":n.record_delimiter="\u2028"}return[void 0,n]},b=t.from([239,187,191]);class v extends i.Transform{constructor(t={}){super({writableObjectMode:!0,...t});const[e,n]=_(t);if(void 0!==e)throw e;this.options=n,this.state={stop:!1},this.info={records:0},this.api=function(t,e,n){return{options:t,state:e,info:n,__transform:function(t,e){if(!Array.isArray(t)&&"object"!=typeof t)return Error("Invalid Record: expect an array or an object, got "+JSON.stringify(t));if(0===this.info.records)if(Array.isArray(t)){if(!0===this.options.header&&void 0===this.options.columns)return Error("Undiscoverable Columns: header option requires column option or object records")}else if(void 0===this.options.columns){const[e,n]=g(Object.keys(t));if(e)return;this.options.columns=n}if(0===this.info.records){this.bom(e);const t=this.headers(e);if(t)return t}try{this.options.on_record&&this.options.on_record(t,this.info.records)}catch(n){return n}let n,r;if(this.options.eof){if([n,r]=this.stringify(t),n)return n;if(void 0===r)return;r+=this.options.record_delimiter}else{if([n,r]=this.stringify(t),n)return n;if(void 0===r)return;(this.options.header||this.info.records)&&(r=this.options.record_delimiter+r)}this.info.records++,e(r)},stringify:function(t,e=!1){if("object"!=typeof t)return[void 0,t];const{columns:n}=this.options,r=[];if(Array.isArray(t)){n&&t.splice(n.length);for(let n=0;n<t.length;n++){const i=t[n],[o,s]=this.__cast(i,{index:n,column:n,records:this.info.records,header:e});if(o)return[o];r[n]=[s,i]}}else for(let i=0;i<n.length;i++){const o=m(t,n[i].key),[s,a]=this.__cast(o,{index:i,column:n[i].key,records:this.info.records,header:e});if(s)return[s];r[i]=[a,o]}let i="";for(let t=0;t<r.length;t++){let e,n,[o,a]=r[t];if("string"==typeof o)e=this.options;else if(s(o)){if(e=o,o=e.value,delete e.value,"string"!=typeof o&&null!=o&&n)return[Error("Invalid Casting Value: returned value must return a string, null or undefined, got "+JSON.stringify(o))];if(e={...this.options,...e},[n,e]=_(e),void 0!==n)return[n]}else{if(null!=o)return[Error("Invalid Casting Value: returned value must return a string, an object, null or undefined, got "+JSON.stringify(o))];e=this.options}const{delimiter:l,escape:u,quote:c,quoted:d,quoted_empty:f,quoted_string:h,quoted_match:p,record_delimiter:m,escape_formulas:g}=e;if(""===o&&""===a){let t=p&&p.filter(t=>"string"==typeof t?-1!==o.indexOf(t):t.test(o));t=t&&t.length>0;!0===(t||!0===f||!0===h&&!1!==f)&&(o=c+o+c),i+=o}else if(o){if("string"!=typeof o)return[Error("Formatter must return a string, null or undefined, got "+JSON.stringify(o))];const t=l.length&&o.indexOf(l)>=0,e=""!==c&&o.indexOf(c)>=0,n=o.indexOf(u)>=0&&u!==c,r=o.indexOf(m)>=0,s=h&&"string"==typeof a;let f=p&&p.filter(t=>"string"==typeof t?-1!==o.indexOf(t):t.test(o));if(f=f&&f.length>0,g)switch(o[0]){case"=":case"+":case"-":case"@":case"\t":case"\r":case"＝":case"＋":case"－":case"＠":o="'"+o}const _=!0===e||t||r||d||s||f;if(!0===_&&!0===n){const t="\\"===u?new RegExp(u+u,"g"):new RegExp(u,"g");o=o.replace(t,u+u)}if(!0===e){const t=new RegExp(c,"g");o=o.replace(t,u+c)}!0===_&&(o=c+o+c),i+=o}else(!0===f||""===a&&!0===h&&!1!==f)&&(i+=c+c);t!==r.length-1&&(i+=l)}return[void 0,i]},bom:function(t){!0===this.options.bom&&t(b)},headers:function(t){if(!1===this.options.header)return;if(void 0===this.options.columns)return;let e,n=this.options.columns.map(t=>t.header);if(this.options.eof?([e,n]=this.stringify(n,!0),n+=this.options.record_delimiter):[e,n]=this.stringify(n),e)return e;t(n)},__cast:function(t,e){const n=typeof t;try{return"string"===n?[void 0,this.options.cast.string(t,e)]:"bigint"===n?[void 0,this.options.cast.bigint(t,e)]:"number"===n?[void 0,this.options.cast.number(t,e)]:"boolean"===n?[void 0,this.options.cast.boolean(t,e)]:t instanceof Date?[void 0,this.options.cast.date(t,e)]:"object"===n&&null!==t?[void 0,this.options.cast.object(t,e)]:[void 0,t,t]}catch(t){return[t]}}}}(this.options,this.state,this.info),this.api.options.on_record=(...t)=>{this.emit("record",...t)}}_transform(t,e,n){if(!0===this.state.stop)return;const r=this.api.__transform(t,this.push.bind(this));void 0!==r&&(this.state.stop=!0),n(r)}_flush(t){if(!0!==this.state.stop){if(0===this.info.records){this.api.bom(this.push.bind(this));const e=this.api.headers(this.push.bind(this));e&&t(e)}t()}}}e.CsvError=o,e.Stringifier=v,e.stringify=function(){let t,e,n;for(const r in arguments){const i=arguments[r],a=typeof i;if(void 0===t&&Array.isArray(i))t=i;else if(void 0===e&&s(i))e=i;else{if(void 0!==n||"function"!==a)throw new o("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(i)} at index ${r}`]);n=i}}const i=new v(e);if(n){const t=[];i.on("readable",(function(){let e;for(;null!==(e=this.read());)t.push(e)})),i.on("error",(function(t){n(t)})),i.on("end",(function(){try{n(void 0,t.join(""))}catch(t){return void n(t)}}))}if(void 0!==t){const e=function(){for(const e of t)i.write(e);i.end()};"function"==typeof r?r(e):setTimeout(e,0)}return i}}).call(this,n(3).Buffer,n(6).setImmediate)},function(t,e,n){"use strict";(function(t,r){var i=n(13);const o=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)};class s extends Error{constructor(e,n,r,...i){Array.isArray(n)&&(n=n.join(" ").trim()),super(n),void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,s),this.code=e;for(const e of i)for(const n in e){const i=e[n];this[n]=t.isBuffer(i)?i.toString(r.encoding):null==i?i:JSON.parse(JSON.stringify(i))}}}const a=function(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(null==r||!1===r)e[n]={disabled:!0};else if("string"==typeof r)e[n]={name:r};else{if(!o(r))throw new s("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(r)} at position ${n}`]);if("string"!=typeof r.name)throw new s("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",'property "name" is required at position '+n,"when column is an object literal"]);e[n]=r}}return e};class l{constructor(e=100){this.size=e,this.length=0,this.buf=t.allocUnsafe(e)}prepend(e){if(t.isBuffer(e)){const n=this.length+e.length;if(n>=this.size&&(this.resize(),n>=this.size))throw Error("INVALID_BUFFER_STATE");const r=this.buf;this.buf=t.allocUnsafe(this.size),e.copy(this.buf,0),r.copy(this.buf,e.length),this.length+=e.length}else{const t=this.length++;t===this.size&&this.resize();const n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,t)}}append(t){const e=this.length++;e===this.size&&this.resize(),this.buf[e]=t}clone(){return t.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=2*this.size;const n=t.allocUnsafe(this.size);this.buf.copy(n,0,0,e),this.buf=n}toString(t){return t?this.buf.slice(0,this.length).toString(t):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const u=function(e){return{bomSkipped:!1,bufBytesStart:0,castField:e.cast_function,commenting:!1,error:void 0,enabled:1===e.from_line,escaping:!1,escapeIsQuote:t.isBuffer(e.escape)&&t.isBuffer(e.quote)&&0===t.compare(e.escape,e.quote),expectedRecordLength:Array.isArray(e.columns)?e.columns.length:void 0,field:new l(20),firstLineToHeaders:e.cast_first_line_to_header,needMoreDataSize:Math.max(null!==e.comment?e.comment.length:0,...e.delimiter.map(t=>t.length),null!==e.quote?e.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new l(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:0===e.record_delimiter.length?0:Math.max(...e.record_delimiter.map(t=>t.length)),trimChars:[t.from(" ",e.encoding)[0],t.from("\t",e.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[t.from(t.from([13],"utf8").toString(),e.encoding),t.from(t.from([10],"utf8").toString(),e.encoding),t.from(t.from([12],"utf8").toString(),e.encoding),t.from(t.from([32],"utf8").toString(),e.encoding),t.from(t.from([9],"utf8").toString(),e.encoding)]}},c=function(e){const n={};for(const t in e)n[(r=t,r.replace(/([A-Z])/g,(function(t,e){return"_"+e.toLowerCase()})))]=e[t];var r;if(void 0===n.encoding||!0===n.encoding)n.encoding="utf8";else if(null===n.encoding||!1===n.encoding)n.encoding=null;else if("string"!=typeof n.encoding&&null!==n.encoding)throw new s("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,","got "+JSON.stringify(n.encoding)],n);if(void 0===n.bom||null===n.bom||!1===n.bom)n.bom=!1;else if(!0!==n.bom)throw new s("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,","got "+JSON.stringify(n.bom)],n);if(n.cast_function=null,void 0===n.cast||null===n.cast||!1===n.cast||""===n.cast)n.cast=void 0;else if("function"==typeof n.cast)n.cast_function=n.cast,n.cast=!0;else if(!0!==n.cast)throw new s("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,","got "+JSON.stringify(n.cast)],n);if(void 0===n.cast_date||null===n.cast_date||!1===n.cast_date||""===n.cast_date)n.cast_date=!1;else if(!0===n.cast_date)n.cast_date=function(t){const e=Date.parse(t);return isNaN(e)?t:new Date(e)};else if("function"!=typeof n.cast_date)throw new s("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,","got "+JSON.stringify(n.cast_date)],n);if(n.cast_first_line_to_header=null,!0===n.columns)n.cast_first_line_to_header=void 0;else if("function"==typeof n.columns)n.cast_first_line_to_header=n.columns,n.columns=!0;else if(Array.isArray(n.columns))n.columns=a(n.columns);else{if(void 0!==n.columns&&null!==n.columns&&!1!==n.columns)throw new s("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,","got "+JSON.stringify(n.columns)],n);n.columns=!1}if(void 0===n.group_columns_by_name||null===n.group_columns_by_name||!1===n.group_columns_by_name)n.group_columns_by_name=!1;else{if(!0!==n.group_columns_by_name)throw new s("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,","got "+JSON.stringify(n.group_columns_by_name)],n);if(!1===n.columns)throw new s("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],n)}if(void 0===n.comment||null===n.comment||!1===n.comment||""===n.comment)n.comment=null;else if("string"==typeof n.comment&&(n.comment=t.from(n.comment,n.encoding)),!t.isBuffer(n.comment))throw new s("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,","got "+JSON.stringify(n.comment)],n);if(void 0===n.comment_no_infix||null===n.comment_no_infix||!1===n.comment_no_infix)n.comment_no_infix=!1;else if(!0!==n.comment_no_infix)throw new s("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,","got "+JSON.stringify(n.comment_no_infix)],n);const i=JSON.stringify(n.delimiter);if(Array.isArray(n.delimiter)||(n.delimiter=[n.delimiter]),0===n.delimiter.length)throw new s("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,","got "+i],n);if(n.delimiter=n.delimiter.map((function(e){if(null==e||!1===e)return t.from(",",n.encoding);if("string"==typeof e&&(e=t.from(e,n.encoding)),!t.isBuffer(e)||0===e.length)throw new s("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,","got "+i],n);return e})),void 0===n.escape||!0===n.escape?n.escape=t.from('"',n.encoding):"string"==typeof n.escape?n.escape=t.from(n.escape,n.encoding):null!==n.escape&&!1!==n.escape||(n.escape=null),null!==n.escape&&!t.isBuffer(n.escape))throw new Error("Invalid Option: escape must be a buffer, a string or a boolean, got "+JSON.stringify(n.escape));if(void 0===n.from||null===n.from)n.from=1;else{if("string"==typeof n.from&&/\d+/.test(n.from)&&(n.from=parseInt(n.from)),!Number.isInteger(n.from))throw new Error("Invalid Option: from must be an integer, got "+JSON.stringify(n.from));if(n.from<0)throw new Error("Invalid Option: from must be a positive integer, got "+JSON.stringify(e.from))}if(void 0===n.from_line||null===n.from_line)n.from_line=1;else{if("string"==typeof n.from_line&&/\d+/.test(n.from_line)&&(n.from_line=parseInt(n.from_line)),!Number.isInteger(n.from_line))throw new Error("Invalid Option: from_line must be an integer, got "+JSON.stringify(e.from_line));if(n.from_line<=0)throw new Error("Invalid Option: from_line must be a positive integer greater than 0, got "+JSON.stringify(e.from_line))}if(void 0===n.ignore_last_delimiters||null===n.ignore_last_delimiters)n.ignore_last_delimiters=!1;else if("number"==typeof n.ignore_last_delimiters)n.ignore_last_delimiters=Math.floor(n.ignore_last_delimiters),0===n.ignore_last_delimiters&&(n.ignore_last_delimiters=!1);else if("boolean"!=typeof n.ignore_last_delimiters)throw new s("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,","got "+JSON.stringify(n.ignore_last_delimiters)],n);if(!0===n.ignore_last_delimiters&&!1===n.columns)throw new s("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],n);if(void 0===n.info||null===n.info||!1===n.info)n.info=!1;else if(!0!==n.info)throw new Error("Invalid Option: info must be true, got "+JSON.stringify(n.info));if(void 0===n.max_record_size||null===n.max_record_size||!1===n.max_record_size)n.max_record_size=0;else if(Number.isInteger(n.max_record_size)&&n.max_record_size>=0);else{if("string"!=typeof n.max_record_size||!/\d+/.test(n.max_record_size))throw new Error("Invalid Option: max_record_size must be a positive integer, got "+JSON.stringify(n.max_record_size));n.max_record_size=parseInt(n.max_record_size)}if(void 0===n.objname||null===n.objname||!1===n.objname)n.objname=void 0;else if(t.isBuffer(n.objname)){if(0===n.objname.length)throw new Error("Invalid Option: objname must be a non empty buffer");null===n.encoding||(n.objname=n.objname.toString(n.encoding))}else if("string"==typeof n.objname){if(0===n.objname.length)throw new Error("Invalid Option: objname must be a non empty string")}else if("number"!=typeof n.objname)throw new Error("Invalid Option: objname must be a string or a buffer, got "+n.objname);if(void 0!==n.objname)if("number"==typeof n.objname){if(!1!==n.columns)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(!1===n.columns)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index");if(void 0===n.on_record||null===n.on_record)n.on_record=void 0;else if("function"!=typeof n.on_record)throw new s("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,","got "+JSON.stringify(n.on_record)],n);if(void 0!==n.on_skip&&null!==n.on_skip&&"function"!=typeof n.on_skip)throw new Error("Invalid Option: on_skip must be a function, got "+JSON.stringify(n.on_skip));if(null===n.quote||!1===n.quote||""===n.quote)n.quote=null;else if(void 0===n.quote||!0===n.quote?n.quote=t.from('"',n.encoding):"string"==typeof n.quote&&(n.quote=t.from(n.quote,n.encoding)),!t.isBuffer(n.quote))throw new Error("Invalid Option: quote must be a buffer or a string, got "+JSON.stringify(n.quote));if(void 0===n.raw||null===n.raw||!1===n.raw)n.raw=!1;else if(!0!==n.raw)throw new Error("Invalid Option: raw must be true, got "+JSON.stringify(n.raw));if(void 0===n.record_delimiter)n.record_delimiter=[];else if("string"==typeof n.record_delimiter||t.isBuffer(n.record_delimiter)){if(0===n.record_delimiter.length)throw new s("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,","got "+JSON.stringify(n.record_delimiter)],n);n.record_delimiter=[n.record_delimiter]}else if(!Array.isArray(n.record_delimiter))throw new s("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,","got "+JSON.stringify(n.record_delimiter)],n);if(n.record_delimiter=n.record_delimiter.map((function(e,r){if("string"!=typeof e&&!t.isBuffer(e))throw new s("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${r},`,"got "+JSON.stringify(e)],n);if(0===e.length)throw new s("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${r},`,"got "+JSON.stringify(e)],n);return"string"==typeof e&&(e=t.from(e,n.encoding)),e})),"boolean"==typeof n.relax_column_count);else{if(void 0!==n.relax_column_count&&null!==n.relax_column_count)throw new Error("Invalid Option: relax_column_count must be a boolean, got "+JSON.stringify(n.relax_column_count));n.relax_column_count=!1}if("boolean"==typeof n.relax_column_count_less);else{if(void 0!==n.relax_column_count_less&&null!==n.relax_column_count_less)throw new Error("Invalid Option: relax_column_count_less must be a boolean, got "+JSON.stringify(n.relax_column_count_less));n.relax_column_count_less=!1}if("boolean"==typeof n.relax_column_count_more);else{if(void 0!==n.relax_column_count_more&&null!==n.relax_column_count_more)throw new Error("Invalid Option: relax_column_count_more must be a boolean, got "+JSON.stringify(n.relax_column_count_more));n.relax_column_count_more=!1}if("boolean"==typeof n.relax_quotes);else{if(void 0!==n.relax_quotes&&null!==n.relax_quotes)throw new Error("Invalid Option: relax_quotes must be a boolean, got "+JSON.stringify(n.relax_quotes));n.relax_quotes=!1}if("boolean"==typeof n.skip_empty_lines);else{if(void 0!==n.skip_empty_lines&&null!==n.skip_empty_lines)throw new Error("Invalid Option: skip_empty_lines must be a boolean, got "+JSON.stringify(n.skip_empty_lines));n.skip_empty_lines=!1}if("boolean"==typeof n.skip_records_with_empty_values);else{if(void 0!==n.skip_records_with_empty_values&&null!==n.skip_records_with_empty_values)throw new Error("Invalid Option: skip_records_with_empty_values must be a boolean, got "+JSON.stringify(n.skip_records_with_empty_values));n.skip_records_with_empty_values=!1}if("boolean"==typeof n.skip_records_with_error);else{if(void 0!==n.skip_records_with_error&&null!==n.skip_records_with_error)throw new Error("Invalid Option: skip_records_with_error must be a boolean, got "+JSON.stringify(n.skip_records_with_error));n.skip_records_with_error=!1}if(void 0===n.rtrim||null===n.rtrim||!1===n.rtrim)n.rtrim=!1;else if(!0!==n.rtrim)throw new Error("Invalid Option: rtrim must be a boolean, got "+JSON.stringify(n.rtrim));if(void 0===n.ltrim||null===n.ltrim||!1===n.ltrim)n.ltrim=!1;else if(!0!==n.ltrim)throw new Error("Invalid Option: ltrim must be a boolean, got "+JSON.stringify(n.ltrim));if(void 0===n.trim||null===n.trim||!1===n.trim)n.trim=!1;else if(!0!==n.trim)throw new Error("Invalid Option: trim must be a boolean, got "+JSON.stringify(n.trim));if(!0===n.trim&&!1!==e.ltrim?n.ltrim=!0:!0!==n.ltrim&&(n.ltrim=!1),!0===n.trim&&!1!==e.rtrim?n.rtrim=!0:!0!==n.rtrim&&(n.rtrim=!1),void 0===n.to||null===n.to)n.to=-1;else{if("string"==typeof n.to&&/\d+/.test(n.to)&&(n.to=parseInt(n.to)),!Number.isInteger(n.to))throw new Error("Invalid Option: to must be an integer, got "+JSON.stringify(e.to));if(n.to<=0)throw new Error("Invalid Option: to must be a positive integer greater than 0, got "+JSON.stringify(e.to))}if(void 0===n.to_line||null===n.to_line)n.to_line=-1;else{if("string"==typeof n.to_line&&/\d+/.test(n.to_line)&&(n.to_line=parseInt(n.to_line)),!Number.isInteger(n.to_line))throw new Error("Invalid Option: to_line must be an integer, got "+JSON.stringify(e.to_line));if(n.to_line<=0)throw new Error("Invalid Option: to_line must be a positive integer greater than 0, got "+JSON.stringify(e.to_line))}return n},d=function(t){return t.every(t=>null==t||t.toString&&""===t.toString().trim())},f={utf8:t.from([239,187,191]),utf16le:t.from([255,254])};class h extends i.Transform{constructor(e={}){super({readableObjectMode:!0,...e,encoding:null}),this.api=function(e={}){const n=c(e);return{info:{bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},original_options:e,options:n,state:u(n),__needMoreData:function(e,n,r){if(r)return!1;const{encoding:i,escape:o,quote:s}=this.options,{quoting:a,needMoreDataSize:l,recordDelimiterMaxLength:u}=this.state;return n-e-1<Math.max(l,0===u?t.from("\r\n",i).length:u,a?(null===o?0:o.length)+s.length:0,a?s.length+u:0)},parse:function(e,n,r,i){const{bom:o,comment_no_infix:a,encoding:l,from_line:u,ltrim:d,max_record_size:h,raw:p,relax_quotes:m,rtrim:g,skip_empty_lines:_,to:b,to_line:v}=this.options;let{comment:y,escape:w,quote:k,record_delimiter:S}=this.options;const{bomSkipped:x,previousBuf:E,rawBuffer:O,escapeIsQuote:A}=this.state;let I;if(void 0===E){if(void 0===e)return void i();I=e}else I=void 0!==E&&void 0===e?E:t.concat([E,e]);if(!1===x)if(!1===o)this.state.bomSkipped=!0;else if(I.length<3){if(!1===n)return void(this.state.previousBuf=I)}else{for(const t in f)if(0===f[t].compare(I,0,f[t].length)){const e=f[t].length;this.state.bufBytesStart+=e,I=I.slice(e),this.options=c({...this.original_options,encoding:t}),({comment:y,escape:w,quote:k}=this.options);break}this.state.bomSkipped=!0}const T=I.length;let C;for(C=0;C<T&&!this.__needMoreData(C,T,n);C++){if(!0===this.state.wasRowDelimiter&&(this.info.lines++,this.state.wasRowDelimiter=!1),-1!==v&&this.info.lines>v)return this.state.stop=!0,void i();if(!1===this.state.quoting&&0===S.length){this.__autoDiscoverRecordDelimiter(I,C)&&(S=this.options.record_delimiter)}const t=I[C];if(!0===p&&O.append(t),13!==t&&10!==t||!1!==this.state.wasRowDelimiter||(this.state.wasRowDelimiter=!0),!0===this.state.escaping)this.state.escaping=!1;else{if(null!==w&&!0===this.state.quoting&&this.__isEscape(I,C,t)&&C+w.length<T){if(!A){this.state.escaping=!0,C+=w.length-1;continue}if(this.__isQuote(I,C+w.length)){this.state.escaping=!0,C+=w.length-1;continue}}if(!1===this.state.commenting&&this.__isQuote(I,C))if(!0===this.state.quoting){const e=I[C+k.length],n=g&&this.__isCharTrimable(I,C+k.length),r=null!==y&&this.__compareBytes(y,I,C+k.length,e),i=this.__isDelimiter(I,C+k.length,e),o=0===S.length?this.__autoDiscoverRecordDelimiter(I,C+k.length):this.__isRecordDelimiter(e,I,C+k.length);if(null!==w&&this.__isEscape(I,C,t)&&this.__isQuote(I,C+w.length))C+=w.length-1;else{if(!e||i||o||r||n){this.state.quoting=!1,this.state.wasQuoting=!0,C+=k.length-1;continue}if(!1===m){const t=this.__error(new s("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(e)}"`,"at line "+this.info.lines,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(void 0!==t)return t}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(k),C+=k.length-1}}else{if(0===this.state.field.length){this.state.quoting=!0,C+=k.length-1;continue}if(!1===m){const t=this.__infoField(),e=Object.keys(f).map(t=>!!f[t].equals(this.state.field.toString())&&t).filter(Boolean)[0],n=this.__error(new s("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(t.column)} at line ${t.lines}, value is ${JSON.stringify(this.state.field.toString(l))}`,e?`(${e} bom)`:void 0],this.options,t,{field:this.state.field}));if(void 0!==n)return n}}if(!1===this.state.quoting){const e=this.__isRecordDelimiter(t,I,C);if(0!==e){if(this.state.commenting&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length)this.info.comment_lines++;else{if(!1===this.state.enabled&&this.info.lines+(!0===this.state.wasRowDelimiter?1:0)>=u){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),C+=e-1;continue}if(!0===_&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length){this.info.empty_lines++,C+=e-1;continue}this.info.bytes=this.state.bufBytesStart+C;const t=this.__onField();if(void 0!==t)return t;this.info.bytes=this.state.bufBytesStart+C+e;const n=this.__onRecord(r);if(void 0!==n)return n;if(-1!==b&&this.info.records>=b)return this.state.stop=!0,void i()}this.state.commenting=!1,C+=e-1;continue}if(this.state.commenting)continue;if(null!==y&&(!1===a||0===this.state.record.length&&0===this.state.field.length)){if(0!==this.__compareBytes(y,I,C,t)){this.state.commenting=!0;continue}}const n=this.__isDelimiter(I,C,t);if(0!==n){this.info.bytes=this.state.bufBytesStart+C;const t=this.__onField();if(void 0!==t)return t;C+=n-1;continue}}}if(!1===this.state.commenting&&0!==h&&this.state.record_length+this.state.field.length>h)return this.__error(new s("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes","of "+h,"at line "+this.info.lines],this.options,this.__infoField()));const e=!1===d||!0===this.state.quoting||0!==this.state.field.length||!this.__isCharTrimable(I,C),n=!1===g||!1===this.state.wasQuoting;if(!0!==e||!0!==n){if(!0!==g||this.__isCharTrimable(I,C)){!1===e&&(C+=this.__isCharTrimable(I,C)-1);continue}return this.__error(new s("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote","at line "+this.info.lines],this.options,this.__infoField()))}this.state.field.append(t)}if(!0===n)if(!0===this.state.quoting){const t=this.__error(new s("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:","the parsing is finished with an opening quote at line "+this.info.lines],this.options,this.__infoField()));if(void 0!==t)return t}else if(!0===this.state.wasQuoting||0!==this.state.record.length||0!==this.state.field.length){this.info.bytes=this.state.bufBytesStart+C;const t=this.__onField();if(void 0!==t)return t;const e=this.__onRecord(r);if(void 0!==e)return e}else!0===this.state.wasRowDelimiter?this.info.empty_lines++:!0===this.state.commenting&&this.info.comment_lines++;else this.state.bufBytesStart+=C,this.state.previousBuf=I.slice(C);!0===this.state.wasRowDelimiter&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(t){const{columns:e,group_columns_by_name:n,encoding:r,info:i,from:o,relax_column_count:a,relax_column_count_less:l,relax_column_count_more:u,raw:c,skip_records_with_empty_values:f}=this.options,{enabled:h,record:p}=this.state;if(!1===h)return this.__resetRecord();const m=p.length;if(!0===e)return!0===f&&d(p)?void this.__resetRecord():this.__firstLineToColumns(p);if(!1===e&&0===this.info.records&&(this.state.expectedRecordLength=m),m!==this.state.expectedRecordLength){const t=!1===e?new s("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${m} on line ${this.info.lines}`],this.options,this.__infoField(),{record:p}):new s("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${e.length},`,`got ${m} on line ${this.info.lines}`],this.options,this.__infoField(),{record:p});if(!0===a||!0===l&&m<this.state.expectedRecordLength||!0===u&&m>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=t;else{const e=this.__error(t);if(e)return e}}if(!0===f&&d(p))this.__resetRecord();else{if(!0===this.state.recordHasError)return this.__resetRecord(),void(this.state.recordHasError=!1);if(this.info.records++,1===o||this.info.records>=o){const{objname:o}=this.options;if(!1!==e){const s={};for(let t=0,r=p.length;t<r;t++)void 0===e[t]||e[t].disabled||(!0===n&&void 0!==s[e[t].name]?Array.isArray(s[e[t].name])?s[e[t].name]=s[e[t].name].concat(p[t]):s[e[t].name]=[s[e[t].name],p[t]]:s[e[t].name]=p[t]);if(!0===c||!0===i){const e=Object.assign({record:s},!0===c?{raw:this.state.rawBuffer.toString(r)}:{},!0===i?{info:this.__infoRecord()}:{}),n=this.__push(void 0===o?e:[s[o],e],t);if(n)return n}else{const e=this.__push(void 0===o?s:[s[o],s],t);if(e)return e}}else if(!0===c||!0===i){const e=Object.assign({record:p},!0===c?{raw:this.state.rawBuffer.toString(r)}:{},!0===i?{info:this.__infoRecord()}:{}),n=this.__push(void 0===o?e:[p[o],e],t);if(n)return n}else{const e=this.__push(void 0===o?p:[p[o],p],t);if(e)return e}}this.__resetRecord()}},__firstLineToColumns:function(t){const{firstLineToHeaders:e}=this.state;try{const n=void 0===e?t:e.call(null,t);if(!Array.isArray(n))return this.__error(new s("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,","got "+JSON.stringify(n)],this.options,this.__infoField(),{headers:n}));const r=a(n);return this.state.expectedRecordLength=r.length,this.options.columns=r,void this.__resetRecord()}catch(t){return t}},__resetRecord:function(){!0===this.options.raw&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:t,encoding:e,rtrim:n,max_record_size:r}=this.options,{enabled:i,wasQuoting:o}=this.state;if(!1===i)return this.__resetField();let s=this.state.field.toString(e);if(!0===n&&!1===o&&(s=s.trimRight()),!0===t){const[t,e]=this.__cast(s);if(void 0!==t)return t;s=e}this.state.record.push(s),0!==r&&"string"==typeof s&&(this.state.record_length+=s.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(t,e){const{on_record:n}=this.options;if(void 0!==n){const e=this.__infoRecord();try{t=n.call(null,t,e)}catch(t){return t}if(null==t)return}e(t)},__cast:function(t){const{columns:e,relax_column_count:n}=this.options;if(!0===Array.isArray(e)&&n&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(null!==this.state.castField)try{const e=this.__infoField();return[void 0,this.state.castField.call(null,t,e)]}catch(t){return[t]}if(this.__isFloat(t))return[void 0,parseFloat(t)];if(!1!==this.options.cast_date){const e=this.__infoField();return[void 0,this.options.cast_date.call(null,t,e)]}return[void 0,t]},__isCharTrimable:function(t,e){return((t,e)=>{const{timchars:n}=this.state;t:for(let r=0;r<n.length;r++){const i=n[r];for(let n=0;n<i.length;n++)if(i[n]!==t[e+n])continue t;return i.length}return 0})(t,e)},__isFloat:function(t){return t-parseFloat(t)+1>=0},__compareBytes:function(t,e,n,r){if(t[0]!==r)return 0;const i=t.length;for(let r=1;r<i;r++)if(t[r]!==e[n+r])return 0;return i},__isDelimiter:function(t,e,n){const{delimiter:r,ignore_last_delimiters:i}=this.options;if(!0===i&&this.state.record.length===this.options.columns.length-1)return 0;if(!1!==i&&"number"==typeof i&&this.state.record.length===i-1)return 0;t:for(let i=0;i<r.length;i++){const o=r[i];if(o[0]===n){for(let n=1;n<o.length;n++)if(o[n]!==t[e+n])continue t;return o.length}}return 0},__isRecordDelimiter:function(t,e,n){const{record_delimiter:r}=this.options,i=r.length;t:for(let o=0;o<i;o++){const i=r[o],s=i.length;if(i[0]===t){for(let t=1;t<s;t++)if(i[t]!==e[n+t])continue t;return i.length}}return 0},__isEscape:function(t,e,n){const{escape:r}=this.options;if(null===r)return!1;const i=r.length;if(r[0]===n){for(let n=0;n<i;n++)if(r[n]!==t[e+n])return!1;return!0}return!1},__isQuote:function(t,e){const{quote:n}=this.options;if(null===n)return!1;const r=n.length;for(let i=0;i<r;i++)if(n[i]!==t[e+i])return!1;return!0},__autoDiscoverRecordDelimiter:function(e,n){const{encoding:r}=this.options,i=[t.from("\r\n",r),t.from("\n",r),t.from("\r",r)];t:for(let t=0;t<i.length;t++){const r=i[t].length;for(let o=0;o<r;o++)if(i[t][o]!==e[n+o])continue t;return this.options.record_delimiter.push(i[t]),this.state.recordDelimiterMaxLength=i[t].length,i[t].length}return 0},__error:function(t){const{encoding:e,raw:n,skip_records_with_error:r}=this.options,i="string"==typeof t?new Error(t):t;return r?(this.state.recordHasError=!0,void(void 0!==this.options.on_skip&&this.options.on_skip(i,n?this.state.rawBuffer.toString(e):void 0))):i},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:t,raw:e,encoding:n}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:!0===t,index:this.state.record.length,raw:e?this.state.rawBuffer.toString(n):void 0}},__infoField:function(){const{columns:t}=this.options,e=Array.isArray(t);return{...this.__infoRecord(),column:!0===e?t.length>this.state.record.length?t[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}}({on_skip:(t,e)=>{this.emit("skip",t,e)},...e}),this.state=this.api.state,this.options=this.api.options,this.info=this.api.info}_transform(t,e,n){if(!0===this.state.stop)return;const r=this.api.parse(t,!1,t=>{this.push(t)},()=>{this.push(null),this.end(),this.on("end",this.destroy)});void 0!==r&&(this.state.stop=!0),n(r)}_flush(t){if(!0===this.state.stop)return;t(this.api.parse(void 0,!0,t=>{this.push(t)},()=>{this.push(null),this.on("end",this.destroy)}))}}e.CsvError=s,e.Parser=h,e.parse=function(){let e,n,i;for(const r in arguments){const a=arguments[r],l=typeof a;if(void 0!==e||"string"!=typeof a&&!t.isBuffer(a))if(void 0===n&&o(a))n=a;else{if(void 0!==i||"function"!==l)throw new s("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(a)} at index ${r}`],n||{});i=a}else e=a}const a=new h(n);if(i){const t=void 0===n||void 0===n.objname?[]:{};a.on("readable",(function(){let e;for(;null!==(e=this.read());)void 0===n||void 0===n.objname?t.push(e):t[e[0]]=e[1]})),a.on("error",(function(t){i(t,void 0,a.api.__infoDataSet())})),a.on("end",(function(){i(void 0,t,a.api.__infoDataSet())}))}if(void 0!==e){const t=function(){a.write(e),a.end()};"function"==typeof r?r(t):setTimeout(t,0)}return a}}).call(this,n(3).Buffer,n(6).setImmediate)},,function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),s=r[0],a=r[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),c=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,l[c++]=255&e);1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(c(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=a;c>0;o=256*o+t[e+d],d+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=u}return(h?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(e*l-1)*Math.pow(2,i),s+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[n+h]=255&s,h+=p,s/=256,u-=8);t[n+h-p]|=128*m}},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,s,a,l=1,u={},c=!1,d=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(t){var e=d.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[l]=i,r(l),l++},f.clearImmediate=h}function h(t){delete u[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(0),n(4))},function(t,e){},function(t,e,n){"use strict";var r=n(8).Buffer,i=n(28);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(0))},function(t,e,n){"use strict";t.exports=o;var r=n(18),i=Object.create(n(5));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(2),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(11)},function(t,e,n){t.exports=n(1)},function(t,e,n){t.exports=n(10).Transform},function(t,e,n){t.exports=n(10).PassThrough},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"ALWAYS",(function(){return f})),n.d(r,"NEVER",(function(){return h})),n.d(r,"DOMCONTENTLOADED",(function(){return p})),n.d(r,"LOAD",(function(){return m}));var i={};n.r(i),n.d(i,"explanation",(function(){return b})),n.d(i,"failureDescriber",(function(){return v}));var o={};n.r(o),n.d(o,"setPrefix",(function(){return k})),n.d(o,"setLogger",(function(){return S})),n.d(o,"log",(function(){return x})),n.d(o,"info",(function(){return E})),n.d(o,"warning",(function(){return O})),n.d(o,"error",(function(){return A}));var s={};function a(t){return function(e){return t(e)}}function l(t,e){return function(n){return t(e(n))}}function u(t,e,n){return function(r){return t(e(n(r)))}}function c(t,e,n,r){return function(i){return t(e(n(r(i))))}}function d(t,e,n,r,i){return function(o){return t(e(n(r(i(o)))))}}n.r(s),n.d(s,"run",(function(){return D}));const f=()=>!0,h=()=>!1,p=t=>"loading"!==t,m=t=>"complete"===t;function g(t){return t.map(t=>t+"\n").join("")}function _(t){return"  "+t.key+": "+t.selector}function b(t){switch(t.result.reason){case 0:return g(["These dependencies were not found:","",g(t.result.dependencies.map(_))]);case 1:return g(["The operation failed with this error:","",t.result.message])}}function v(t){return e=>g([`Could not ${e.operation.description} on this page:`,"","  "+location.href,"",b(e).trim(),"",`This problem might be caused by ${t.siteName} changing its content/structure, in which case ${t.extensionName} needs to be updated accordingly. Otherwise, it's probably a bug in ${t.extensionName}.`,"","If you file a bug report, please include this message."])}let y="",w=console;function k(t){y=t}function S(t){w=t}function x(t){w.log(y,t)}function E(t){w.info(y,t)}function O(t){w.warn(y,t)}function A(t){w.error(y,t)}function I(t){return"number"==typeof t}function T(t){return"string"==typeof t}function C(t){return null===t}function R(t){const e=void 0===t.dependencies?{}:t.dependencies,n=Object.entries(e).map(([t,e])=>({key:t,selector:e,element:document.querySelector(e)})),r=n.filter(t=>C(t.element));if(r.length>0)return{reason:0,dependencies:r};const i=n.reduce((t,e)=>Object.defineProperty(t,e.key,{value:e.element}),{});return T(o=t.action(i))?{reason:1,message:o}:void 0;var o}const N=t=>e=>{const n=document.getElementById(e.id);null!==n&&n.setAttribute("media",t)};N("all"),N("not all");function D(t){k(`[${t.name}]`);const e="data-"+t.id+"-has-run";var n;document.documentElement.hasAttribute(e)?O(`It looks as though ${t.name} has already run (because the attribute "${e}" was found on <head>). Stopping.`):(document.documentElement.setAttribute(e,""),t.initialAction(),function(t){const e=document.createDocumentFragment();Object.entries(t).forEach(([t,n])=>{const r=document.createElement("style");void 0!==n.id&&(r.id=n.id),r.textContent=n.css,r.media=n.condition(window)?"all":"not all",e.appendChild(r)}),document.documentElement.appendChild(e)}(t.stylesheets),function t(e,r,i){const o=I(i)&&i<=0,s=[],a=[],l=document.readyState;for(const t of e)(void 0===t.deferUntil||t.deferUntil(l)?s:a).push(t);for(const t of s){const e=R(t);if(void 0!==e)switch(e.reason){case 0:o?r.push({result:e,operation:t}):a.push(t);break;case 1:r.push({result:e,operation:t})}}a.length>0?setTimeout(()=>t(a,r,I(i)?i-1:n.tryUntil(l)?n.extraTries:void 0),n.interval):r.length>0&&n.handleFailures(r)}((n=t.operationsPlan).operations.filter(t=>t.condition(window)),[]))}var L="more-canvas-tools",z="More Canvas Tools",B="0.5.0";const P="Instructure",M=/courses\/\d+\/gradebook\/speed_grader/,U=/courses\/\d+\/(assignments|quizzes)\/\d+/,j=/courses\/\d+\/assignments\/?$/,F=/courses\/\d+\/assignments\/\d+\/submissions\/\d+/,q=/courses\/\d+\/?$/,W=/courses\/?$/;function V(t){return t.test(document.location.pathname)}const Z=V(/courses\/\d+\/users/),Y=V(M),J=(V(F),V(U)),H=V(j),G=V(q),Q=V(W),K="/"===document.location.pathname,X=/canvadocs.instructure.com/.test(document.location.hostname),tt=!(Y||X||K||Q),et=!X;function nt(t,e){return 0==$("#dialog").length&&$(document.body).append('<div title="'+t+'" id="dialog"></div>'),$("#dialog").dialog({autoOpen:!1,show:"blind",hide:"explode",width:"80%",height:document.documentElement.clientHeight-100}),$("#dialog").dialog("open"),$("#dialog").html(e),$("#dialog")}var rt,it=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};function ot(t="",e=""){const n=window.ENV.current_context.url+"/gradebook/speed_grader";console.log(n);const r=new URL(n);return t&&r.searchParams.set("student_id",t),e&&r.searchParams.set("assignment_id",e),r.toString()}function st(){return parseInt(window.ENV.context_asset_string.split("_")[1],10)}function at(){return window.ENV.DEEP_LINKING_POST_MESSAGE_ORIGIN}function lt(){return at()+"/api/v1/"}function ut(){return lt()+"courses/"+st()}function ct(){return at()+"/courses/"+st()}function dt(){return{assignmentId:parseInt(window.ENV.assignment_id,10),assignmentTitle:window.ENV.assignment_title,currentUser:window.ENV.current_user}}function ft(t,e,n){return pt(t,ut()+"/"+e,n)}function ht(t,e,n,r){return it(this,void 0,void 0,(function*(){!function t(e,n=0){return n<e.length?e[n]().then(()=>t(e,n+1)):new Promise(t=>t())}(n.map(n=>()=>{var i;return i=100,n["student_ids[]"],new Promise((t,e)=>{setTimeout(()=>{t()},i)}),ft(t,e,n.options).done(t=>r(n,t))}))}))}function pt(t,e,n){n.per_page=100;let r=[],i=$.Deferred();function o(t,e,o){if("success"!==e)return void i.reject(t,e,o);r.push(...t);let a=o.getResponseHeader("link"),l=function(t){let e,n=/page=(\d+?).*?rel="(.*?)"/gm,r={};for(;null!==(e=n.exec(t));)r[e[2]]=Number.parseInt(e[1]);return r}(a);i.notify(r,l);let u=function(t){let e=/,[\s]*<.*?[\?&]page=([^\&]+).*?>;[\s]*rel="next"/g.exec(t);return null==e?null:e[1]}(a);null!=u&&r.length<500?(n.page=u,s()):i.resolve(r)}function s(){t(e,n,o)}return s(),i.promise()}function mt(){let t=new Date;return t.setDate(t.getDate()-7),t.toISOString()}!function(t){t.submitted="submitted",t.unsubmitted="unsubmitted",t.graded="graded",t.pending_review="pending_review"}(rt||(rt={}));function gt(t,e){return t.children[e].innerText||t.children[e].textContent}function _t(t){t.forEach(t=>t.addEventListener("click",(function(){const e=t.closest("table");let n=!0;var r,i;Array.from(e.querySelectorAll("tr:nth-child(n+2)")).sort((r=Array.from(t.parentNode.children).indexOf(t),i=n=!n,(t,e)=>{return n=gt(i?t:e,r),o=gt(i?e:t,r),""===n||""===o||isNaN(n)||isNaN(o)?n.toString().localeCompare(o):n-o;var n,o})).forEach(t=>e.appendChild(t))})))}function bt(t,e,n){vt("Preloaded students, staff, and assignments"),$("#cwu-activity-report-control-build").prop("disabled",!1),$("#cwu-activity-report-control-build").click(()=>{$("#cwu-activity-report-area").html('\n<strong>Student Submissions</strong><br>\n<emphasis>\n    <span id=\'cwu-activity-report-area-student-loaded\'></span>\n    /\n    <span id=\'cwu-activity-report-area-student-count\'></span> loaded\n</emphasis>\n<div id=\'cwu-activity-report-area-student\'>\n    <table class="table table-striped table-bordered table-condensed"\n        id="cwu-activity-report-area-student-table">\n    <tr>\n        <th>Student</th>\n        <th>Submitted Recently</th>\n        <th>Total Unsubmitted</th>\n    </tr>\n    </table>\n</div>\n<strong>Staff Grading</strong>\n<table class="table table-striped table-bordered table-condensed"\nid="cwu-activity-report-area-grader-table">\n</table>\n'),_t(document.querySelectorAll("#cwu-activity-report-area-student-table th")),vt("");let r=$("#cwu-activity-report-control-start").val()||mt(),i=0,o=(n.filter(t=>t.published).length,{});e.forEach(t=>{o[t.id]={total:0,recent:0}}),$("#cwu-activity-report-area-student-count").html(t.length+""),ht($.get,"students/submissions",t.map(t=>({student:t,options:{"student_ids[]":t.id}})),(t,n)=>{let s=n.filter(t=>t.workflow_state===rt.unsubmitted).length,a=n.filter(t=>t.submitted_at>r?1:0);n.forEach(t=>{t.workflow_state===rt.graded&&t.grader_id in o&&(o[t.grader_id].total+=1,t.submitted_at>r&&(o[t.grader_id].recent+=1))}),function(t,e){let n={};e.forEach(t=>{n[t.id+""]=t});let r="\n    <tr>\n        <th>Grader</th>\n        <th>Graded Recently</th>\n        <th>Graded Total</th>\n    </tr>\n    "+Object.keys(t).map(e=>`<tr>\n            <td>${n[e].name}</td>\n            <td>${t[e].recent}</td>\n            <td>${t[e].total}</td>\n        </tr>`).join("\n");$("#cwu-activity-report-area-grader-table").html(r)}(o,e),$("#cwu-activity-report-area-student table").append($(`<tr><td>${t.student.name}</td><td>${a.length}</td><td>${s}</td></tr>`)),i+=1,$("#cwu-activity-report-area-student-loaded").html(i+"")})})}function vt(t){$("#cwu-activity-report-status").html(t)}function yt(t,e){let n=$(`<span id="cwu-activity-report-status-${e}">${e}</span>`);function r(t){return(e,n)=>{void 0===n||n.last===n.current?$("#cwu-activity-report-status-"+t).remove():void 0===n.last?$("#cwu-activity-report-status-"+t).html(t+`<span class='badge'>${e.length} so far</span>`):$("#cwu-activity-report-status-"+t).html(t+`<span class='badge'>${n.last-n.current}</span>`)}}return $("#cwu-activity-report-status").append(n),t.progress(r(e)).done(r(e))}var wt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};function kt(t){$(t).before('\n<div>\n    <a href="#" id="who-is-button" icon="icon-peer-graded" class="btn"\n        role="button"\n        style="margin-bottom: 1em; margin-right: 1em"\n        title="Check who graded this submission"\n        aria-label="Check who graded this submission" data-tooltip="">\n        Check Grader\n    </a>\n</div>\n'),$("#who-is-button").on("click",()=>{!function(){wt(this,void 0,void 0,(function*(){const t=new URLSearchParams(window.location.search).get("student_id"),e=dt(),n=yield $.get(`${ut()}/assignments/${e.assignmentId}/submissions/${t}`,{"include[]":"user,visibility,submission_comments,rubric_assessment,full_rubric_assessment"});let r="No grader information. Either this wasn't graded, or the grade was assigned by Canvas (e.g., for a late assignment).";if(null===n.grader_id);else if(n.grader_id<0)r=`Autograded (${n.grader_id})`;else{r=`${(yield $.get(`${ut()}/users/${n.grader_id}`)).name} (${n.graded_at})`}nt("Grader Information",r)}))}()})}var St=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};function xt(t,e){return new Promise((function(e,n){const r=[],i=[];t.forEach(t=>{const e=document.cookie.split("; ").find(t=>t.startsWith("_csrf_token"));if(e){const n=unescape(e).split("=")[1];r.push(jQuery.ajax(ct()+"/limit_user_grading/"+t.canvasId,{data:{limit:"1",_method:"POST",authenticity_token:n},type:"POST"}))}else i.push(t)}),Promise.allSettled(r).then(n=>{n.forEach((e,n)=>{"rejected"===e.status&&i.push(t[n])}),e(i)})}))}function Et(t){return St(this,void 0,void 0,(function*(){let e=function(){let t=document.getElementsByClassName("rosterUser"),e=[];for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof HTMLElement){let t=r.children;const n=/user_(\d+)/g.exec(r.id);e.push({name:t[1].innerText,canvasId:null==n?"":n[1],sisId:t[3].innerText,section:t[4].innerText,type:t[5].innerText})}}return e.filter(t=>"Student"==t.type)}();st();for(let n=0;n<t&&e.length>0;n++)e=yield xt(e),e.length>0?$("#limitEnrollmentFinalStatus").append(`Retrying ${e.length} records<br>`):$("#limitEnrollmentFinalStatus").append("All records processed<br>");return e}))}var Ot=n(19),At=n.n(Ot),It=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};var Tt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};function Ct(t){$("#spreadGradeStatus").addClass("alert alert-danger").html(t)}const Rt=/[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,15}/gm;function Nt(t){var e;return Tt(this,void 0,void 0,(function*(){let n,r;try{n=yield function(t){return It(this,void 0,void 0,(function*(){return fetch(t).then((function(t){return 200===t.status||0===t.status?Promise.resolve(t.blob()):Promise.reject(new Error(t.statusText))})).then(At.a.loadAsync)}))}(t.url)}catch(e){throw Ct("Could not download a Word file from the attachment: "+t.url),e}try{r=yield null===(e=n.file("word/document.xml"))||void 0===e?void 0:e.async("string")}catch(e){throw Ct("Could not process the Word file from the attachment: "+t.url),e}if(!r)throw Ct("Students' word document appears to be empty or corrupted."),"Word document appears to be empty or corrupted";return[...r.matchAll(Rt)].map(t=>t[0])}))}function Dt(t,e,n){return Tt(this,void 0,void 0,(function*(){const r=yield ft($.get,"users",{}),i=Object.fromEntries(r.map(t=>{var e;return[null===(e=t.email)||void 0===e?void 0:e.toLowerCase(),t]})),o=Object.fromEntries(r.map(t=>[t.id+"",t]));t.forEach(t=>Tt(this,void 0,void 0,(function*(){var r;const s=' style="margin-bottom: 2px; padding-bottom: 2px; border-top: 1px solid lightgray;"',a=i[t.toLowerCase()];if(!a)return void $("#sg-found-partners").append(`<div ${s}>Unknown Email Address: ${t}</div>`);const l=yield $t(e,a.id),u=n.user.id===a.id?"<strong>Original submitting student</strong><br>":l.grade?"<button>Overwrite</button>":"<button>Spread</button>";$("#sg-found-partners").append(`<div id="sg-spread-result-${a.id}" ${s}>\n                <a href="?assignment_id=${e}&student_id=${a.id}" target=_blank>${a.name}</a> (${t})<br>\n                <span class="sg-spread-grade" style="margin-right: 4px">${l.grade||""}</span>\n                <span class="sg-spread-rubric" style="margin-right: 4px">${(null===(r=l.full_rubric_assessment)||void 0===r?void 0:r.data.length)?"(has rubric)":""}</span>\n                ${u}\n            </div>`);const c=o[n.grader_id+""]||dt().currentUser;$(`#sg-spread-result-${a.id} button`).on("click",()=>{!function(t,e,n,r){Tt(this,void 0,void 0,(function*(){r.display_name&&r.display_name;const i={"submission[posted_grade]":""+n.score,"submission[excuse]":n.excused,"submission[seconds_late_override]":n.seconds_late};let o=!1,s={};n.full_rubric_assessment&&n.full_rubric_assessment.data.length&&(o=function(t,e){return e.forEach(e=>{const n=e.criterion_id;t[`rubric_assessment[${n}][points]`]=e.points,t[`rubric_assessment[${n}][rating_id]`]=e.id,e.comments&&(t[`rubric_assessment[${n}][comments]`]=e.comments)}),!0}(s,n.full_rubric_assessment.data)),n.late_policy_status&&(i["submission[late_policy_status]"]=n.late_policy_status);let a=!1,l=void 0,u=void 0;try{u=yield $.ajax({url:`${ut()}/assignments/${e}/submissions/${t}`,type:"put",data:s}),l=yield $.ajax({url:`${ut()}/assignments/${e}/submissions/${t}`,type:"put",data:i}),a="errors"in l||"errors"in u}catch(t){a=!0,console.error(t)}!a&&l?($(`#sg-spread-result-${t} .sg-spread-grade`).html(""+l.score),$(`#sg-spread-result-${t} .sg-spread-rubric`).html(o?"(has rubric)":""),$(`#sg-spread-result-${t} button`).after("Success!"),$(`#sg-spread-result-${t} button`).remove()):$(`#sg-spread-result-${t} button`).html("❌Failed")}))}(a.id,e,n,c)}),n.user.id!==a.id&&n.submission_comments&&n.submission_comments.length&&n.submission_comments.forEach(t=>{const n=$(`<button>${a.name}</button>`);(function(t,e){if(e&&e.length)return e.some(e=>t.comment===e.comment);return!1})(t,l.submission_comments)&&(n.prop("disabled",!0),n.attr("title","Comment already made!")),n.on("click",r=>Tt(this,void 0,void 0,(function*(){(yield function(t,e,n,r,i){return Tt(this,void 0,void 0,(function*(){const r={"comment[text_comment]":t};let i=!1,o=void 0;try{o=yield $.ajax({url:`${ut()}/assignments/${n}/submissions/${e}`,type:"put",data:r}),i="errors"in o}catch(t){i=!0,console.error(t)}return!i}))}(t.comment,a.id,e))?(n.prop("disabled",!0),n.attr("title","Comment copied successfully!")):alert("Failed to copy comment!")}))),$("#sg-comments-action-"+t.id).append(n),$("#sg-comments-action-"+t.id).append("<br>")})})))}))}function $t(t,e){return Tt(this,void 0,void 0,(function*(){return $.get(`${ut()}/assignments/${t}/submissions/${e}`,{"include[]":["user","visibility","submission_comments","rubric_assessment","full_rubric_assessment","assignment"]})}))}function Lt(){return Tt(this,void 0,void 0,(function*(){const t=$("#students_selectmenu").val(),e=dt(),n=yield $t(e.assignmentId,t);if(n&&n.grade&&n.attachments&&n.attachments.length){const t=yield Promise.all(n.attachments.map(Nt));t&&t.length?($("#spreadGradeStatus").removeClass("alert alert-danger").html(""),function(t){if($("#sg-existing-grade").html(""+t.score),t.full_rubric_assessment&&t.full_rubric_assessment.data.length){const e=Object.fromEntries(t.assignment.rubric.map(t=>[t.id,t])),n=t.full_rubric_assessment.data.map(t=>{const n=e[t.criterion_id];let r=`\n                <tr>\n                    <td>${n.description}</td>\n                    <td>${t.description}</td>\n                    <td>${t.points}/${n.points}</td>\n                </tr>\n            `;return t.comments&&(r+=`<tr><td colspan="3"><small>Comment: ${t.comments}</small></td></tr>`),r}).join("\n");$("#sg-existing-rubric tbody").html(n)}t.submission_comments&&t.submission_comments.length&&t.submission_comments.forEach(t=>{$("#sg-comments").append(`<tr>\n                <td>\n                    <img src="${t.avatar_path}" class="avatar" style="display: inline"/>\n                    ${t.author_name}\n                </td>\n                <td>\n                    ${t.comment}\n                </td>\n                <td id="sg-comments-action-${t.id}">\n                    Copy to: \n                </td>\n            </tr>`)})}(n),yield Dt(t.flat(),e.assignmentId,n)):Ct("No partners were found in the Word Document. Did they mess up the format?")}else n?n.grade?Ct("Assignment did not have any attachments uploaded."):Ct("No grade to spread."):Ct("No submission to spread.")}))}var zt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};function Bt(t){const e=$(t.target).val();$("#list-ungraded-remember-as-mine").is(":checked")&&localStorage.setItem("setting-ungraded-default-group",e)}function Pt(t){const e=$("#list-ungraded-group-select").val();$(t.target).is(":checked")?localStorage.setItem("setting-ungraded-default-group",e):localStorage.removeItem("setting-ungraded-default-group")}function Mt(){return zt(this,void 0,void 0,(function*(){const t={assignmentId:parseInt(window.ENV.ASSIGNMENT_ID,10),assignmentTitle:window.ENV.assignment_title,currentUser:window.ENV.current_user},e=yield ft($.get,"groups",{});$("#list-ungraded-group-select").append(e.map(t=>`<option value="${t.id}">${t.name}</option>`).join(""));const n=yield ft($.get,"assignments",{});$("#list-ungraded-assignment-select").append(n.map(t=>`<option value="${t.id}">${t.name}</option>`).join("")),$("#list-ungraded-assignment-select").val(t.assignmentId);const r=function(t,e){const n=localStorage.getItem("setting-ungraded-default-group");if(null!==n)return n;const r=e.find(e=>e.name===t.currentUser.display_name);return r?""+r.id:""}(t,e);$("#list-ungraded-group-select").val(r),$("#list-ungraded-group-select").on("change",Bt),$("#list-ungraded-remember-as-mine").on("change",Pt),$("#list-ungraded-submit").on("click",()=>function(t="",e=""){return zt(this,void 0,void 0,(function*(){let n;if(t||(t=""+($("#list-ungraded-group-select").val()||"")),e||(e=""+($("#list-ungraded-assignment-select").val()||"")),$("#ungradedReportStatus").html("Loading students..."),t){n=(yield pt($.get,lt()+`groups/${t}/users`,{})).map(t=>t.id)}else n=[];const r=n.length?n.length:"all",i=e?"one assignment":"all assignments";$("#ungradedReportStatus").html(`Loading ungraded submissions for ${r} student(s) for ${i}...`);const o={"student_ids[]":n.length?n:"all",workflow_state:"submitted","include[]":["assignment","user"]};e&&(o["assignment_ids[]"]=e);const s=yield ft($.get,"students/submissions",o);$("#ungradedReportStatus").html(`Displaying ${s.length} ungraded submissions...`);const a=$("#ungradedReportTableBody");a.html("");for(const t of s){const e=$("<tr>");e.append($("<td>").text(t.assignment.name)),e.append($("<td>").text(t.user.name));const n=ot(t.user.id,t.assignment.id);e.append($("<td>").append($("<a>").attr("href",n).text("Speed Grader")));const r=t.assignment.html_url+"/submissions/"+t.user.id;e.append($("<td>").append($("<a>").attr("href",r).text("Submission"))),a.append(e)}}))}()),$("#list-ungraded-submit").prop("disabled",!1),$("#ungradedReportStatus").html("")}))}var Ut=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};const jt={ObserverEnrollment:4,StudentEnrollment:0,DesignerEnrollment:3,TaEnrollment:2,TeacherEnrollment:1,AdminEnrollment:5,Other:6},Ft={ObserverEnrollment:"Observers",StudentEnrollment:"Students",DesignerEnrollment:"Designers",TaEnrollment:"Teaching Assistants",TeacherEnrollment:"Teachers",AdminEnrollment:"Admins",Other:"Other"};function qt(t){const e=t.enrollments[0],n=new Date(e.created_at);return((new Date).getTime()-n.getTime())/864e5}function Wt(t){return Ut(this,void 0,void 0,(function*(){let t=yield ft($.get,"users",{per_page:100,"include[]":["enrollments"]});const e=$("#recency-days").val();if(""!==e.toString().trim()){const n=parseInt(e),r=new Date,i=new Date(r.getTime()-24*n*60*60*1e3);t=t.filter(t=>{const e=t.enrollments[0];return new Date(e.created_at)>i})}const n=t.reduce((t,e)=>{const n=e.enrollments[0].type;return t[n]||(t[n]=[]),t[n].push(e),t},{});$("#recent-enrollment-list").empty();for(const t of Object.keys(n).sort((t,e)=>jt[t]-jt[e])){let e=n[t];e.sort((t,e)=>qt(t)-qt(e));const r=$(`\n            <div class="recent-enrollment-group" data-role="${t}">\n                <span>${Ft[t]}</span>\n                <ul id="recent-enrollment-group-${t}"></ul>\n            </div>\n        `);$("#recent-enrollment-list").append(r);let i=e.slice(5);e=e.slice(0,5);for(const n of e){const e=Vt(n,t);$("#recent-enrollment-group-"+t).append(e)}if(i.length>0){const e=$(`<li><small><details><summary>And ${i.length} more...</summary></details></small></li>`);$("#recent-enrollment-group-"+t).append(e);const n=e.find("details");for(const e of i){const r=Vt(e,t);n.append(r)}}}}))}function Vt(t,e){const n=qt(t);return`<li title="${t.name} enrolled ${n.toFixed(1)} days ago">\n    <a href="${ct()}/users/${t.id}" target="_blank">\n        <small>${t.name}\n            <span class="ic-badge ${function(t){return t<3?"ic-badge--danger":t<5?"ic-badge--alert":"ic-badge--neutral"}(n)}" style="border: 1px solid darkgray; display: inline-block; white-space: nowrap">${n.toFixed(0)}</span>\n        </small>\n        </a>\n    </li>`}var Zt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};const Yt=["pages"],Jt={pages:{name:"Pages",attributes:[{name:"title",type:"text"},{name:"body",type:"text"}]},syllabus:{name:"Syllabus",attributes:[]},assignment:{name:"Assignments",attributes:["name"]},quiz:{name:"Quizzes",attributes:["name","questions"]},discussion_topic:{name:"Discussion Topics",attributes:["title","body"]},file:{name:"Files",attributes:["display_name"]},module:{name:"Modules",attributes:["name"]},users:{name:"Users",attributes:["name","login_id"]}},Ht=`\n<div id="search-dialog">\n    <div class="alert alert-info">Sorry, this feature is still in development. It may not work as expected.</div>\n    <span>Search for type(s) across courses:</span>\n    <div id="builder"></div>\n    <div class="row">\n        <div class="col-5">\n            <p>Choose courses that match all of these filters:</p>\n            <ul id="search-dialog-course-rules">\n                <li>Name contains 106</li>\n            </ul>\n            <button class="btn btn-primary" id="search-dialog-course-add-rule">Add Filter</button>\n        </div>\n        <div class="col-5">\n            <p>Preview of selected courses:</p>\n            <ul id="search-dialog-course-preview" style="max-height: 10em; overflow-y: auto;">\n                <li>106 - Course Name</li>\n            </ul>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-5">\n            <button class="btn btn-primary" id="search-dialog-course-save">Save course filters</button>\n        </div>\n        <div class="col-5">\n            <button class="btn btn-primary" id="search-dialog-course-load">Load course filters</button>\n        </div>\n    </div>\n    <div style="margin-left: 1em" class="row">\n        ${Object.keys(Jt).map(t=>{const e=Yt.includes(t),n=Jt[t].attributes.map(n=>{const r="string"==typeof n?n:n.name;return`<li>\n                <label for="search-dialog-attr-${t}-${r}">\n                    <code>${r}</code>\n                </label>\n                <input type="checkbox" id="search-dialog-attr-${t}-${r}"\n                    ${e?"checked":""}>\n            </li>`}).join("\n");return`<div class="search-dialog-type-${t} col-3"\n            style="border: 1px solid black; padding: 0.5em; margin: 0.5em">\n            <label for="search-dialog-type-${t}">${Jt[t].name}</label>\n            <input type="checkbox" id="search-dialog-type-${t}"\n                ${e?"checked":""}>\n            <ul style="margin-left: 1em; display: ${e?"block":"none"}"\n                id="search-dialog-attr-${t}">\n                ${n}\n            </ul>\n        </div>`}).join("\n")}\n    </div>\n    <div style="display:none; margin-left: 1em;" id="search-dialog-choose-courses">\n        <div>Choose Specific Courses</div>\n        <div class="row">\n            <div class="col-5">\n                <select id="search-dialog-courses" class="form-control" multiple></select>\n                <div class="form-text">Choose which courses to search across.</div>\n            </div>\n            <div class="col-5">\n                <button id="search-dialog-courses-add">Add selected courses</button>\n                <ul id="search-dialog-courses-chosen"></ul>\n            </div>\n        </div>\n        <div>\n            <button id="search-dialog-courses-save">Save course selections as option</button>\n        </div>\n        <div>\n            Previous course selections:\n            <select id="search-dialog-courses-previous" class="form-control"></select>\n            <div class="form-text">Choose a previous selection of courses to search across.</div>\n            <div id="search-dialog-courses-preview"></div>\n            <button id="search-dialog-courses-load">Load this previous course selection</button>\n        </div>\n        <hr>\n    </div>\n    <div>\n        <label for="search-dialog-input">For text:</label>\n        <input type="text" id="search-dialog-input" class="form-control" value="text">\n    </div>\n    <div>\n        <input type="checkbox" id="search-dialog-fuzzy" class="form-control">\n        <label class="form-label">Use Fuzzy Match instead of Exact Match</label>\n        <div class="form-text">Useful for when you're not sure of the exact text, and want to use a more approximate match.</div>\n    </div>\n    <div>\n        <button id="search-dialog-submit" class="btn btn-primary">Search</button>\n    </div>\n    <hr>\n    <div id="search-dialog-results">\n        <div id="search-dialog-status">Loading...</div>\n        <div id="search-dialog-results-list"></div>\n    </div>\n</div>\n`;function Gt(t,e,n,r){return Zt(this,void 0,void 0,(function*(){const i=[],o={per_page:100,"include[]":r},s=`${lt()}courses/${e.id}/${n}`,a=yield pt($.get,s,o);for(const o of a){const s=r.filter(e=>o[e]&&o[e].includes(t));if(s.length){const t=o.title||o.name||o.display_name||o.login_id,r=s.map(t=>o[t]).join("\n"),a=o.html_url||o.url;i.push({course:e,type:n,title:t,id:o.id,url:a,text:r,data:o})}}return i}))}function Qt(t){$("#search-dialog-status").text(t)}function Kt(){return Zt(this,void 0,void 0,(function*(){const t=$("#search-dialog-input"),e=$("#search-dialog-results-list"),n=$("#search-dialog-status"),r=()=>Zt(this,void 0,void 0,(function*(){if(!t.val())return;e.empty(),n.text("Searching...");const r=function(){const t=$("#search-dialog-input").val(),e={};Object.keys(Jt).forEach(t=>{$("#search-dialog-type-"+t).prop("checked")&&(e[t]=Jt[t].attributes.filter(e=>$(`#search-dialog-attr-${t}-${e}`).prop("checked")).map(t=>t))});const n=$("#search-dialog-across").val(),r=$("#search-dialog-fuzzy").prop("checked");return{input:t,resources:e,across:n,fuzzy:r}}(),i=yield function(t){return Zt(this,void 0,void 0,(function*(){console.log(t);const e={per_page:100};"all"!==t.across&&(e["state[]"]="published"===t.across?["available","completed"]:["unpublished"]);const n=[],r=[];let i=yield pt($.get,lt()+"courses",e);i=i.slice(0,10),Qt(`Searching ${i.length} courses...`);let o=0;for(const e of i){const s=[];for(const n of Object.keys(t.resources)){const a=n,l=t.resources[n];Qt(`(${o+1}/${i.length}) Searching ${e.course_code} - ${a}...`);try{const n=yield Gt(t.input,e,a,l);s.push(...n),Qt(`(${o+1}/${i.length}) Searched ${e.course_code} - Found ${n.length} ${a}`)}catch(t){r.push({course:e,type:a,attributes:l,error:t}),console.error(`Error searching ${e.course_code} - ${a}`,t),Qt(`(${o+1}/${i.length}) Error searching ${e.course_code} - ${a}`)}}n.push(...s),Qt(`(${o+1}/${i.length}) Searched ${e.course_code} - Found ${s.length} results`),o++}return Qt(`Search complete, found ${n.length} results`),n}))}(r);n.text(`Found ${i.length} results`),i.forEach(t=>{e.append(`\n            <div style="border: 1px solid black; padding: 0.5em; margin: 0.5em">\n                <strong>${t.course.course_code} - ${t.type}</strong>\n                <div><a href="${t.url}">${t.title}</a></div>\n                <div>${t.text}</div>\n            </div>`)})}));t.on("input",()=>{$("#search-dialog-submit").prop("disabled",!t.val())}),t.on("keypress",e=>{$("#search-dialog-submit").prop("disabled",!t.val()),"Enter"===e.key&&t.val()&&r()}),$("#search-dialog-submit").on("click",r),Object.keys(Jt).forEach(t=>{const e=$("#search-dialog-type-"+t),n=$("#search-dialog-attr-"+t);e.on("change",()=>{n.css("display",e.prop("checked")?"block":"none")})});const i=$("#search-dialog-across"),o=$("#search-dialog-choose-courses");i.on("change",()=>Zt(this,void 0,void 0,(function*(){const t="choose"===i.val();if(o.css("display",t?"block":"none"),t){const t=$("#search-dialog-courses");t.empty(),t.append('<option value="">LOADING</option>');const e=yield pt($.get,lt()+"courses",{per_page:100});t.empty(),e.forEach(e=>{t.append(`<option value="${e.id}">${e.course_code} - ${e.name}</option>`)})}})))}))}var Xt=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,te=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,ee=/[^-+\dA-Z]/g;var ne={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},re={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},ie=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).padStart(e,"0")},oe=function(t){var e=t.y,n=t.m,r=t.d,i=t._,o=t.dayName,s=t.short,a=void 0!==s&&s,l=new Date,u=new Date;u.setDate(u[i+"Date"]()-1);var c=new Date;c.setDate(c[i+"Date"]()+1);return l[i+"FullYear"]()===e&&l[i+"Month"]()===n&&l[i+"Date"]()===r?a?"Tdy":"Today":u[i+"FullYear"]()===e&&u[i+"Month"]()===n&&u[i+"Date"]()===r?a?"Ysd":"Yesterday":c[i+"FullYear"]()===e&&c[i+"Month"]()===n&&c[i+"Date"]()===r?a?"Tmw":"Tomorrow":o},se=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);var i=(e-n)/6048e5;return 1+Math.floor(i)},ae=function(t){var e=t.getDay();return 0===e&&(e=7),e},le=function(t){return(String(t).match(te)||[""]).pop().replace(ee,"").replace(/GMT\+0000/g,"UTC")},ue=n(20),ce=n(21),de=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};function fe(t){localStorage.setItem("bulk-assignment-dates-settings",JSON.stringify(t))}function he(t){const e=localStorage.getItem("bulk-assignment-dates-draft-"+t);return e?JSON.parse(e):null}function pe(t){if(!t)return"";let e="ddd, mmm dS, yyyy, h:MM TT";const n=new Date(t);return(new Date).getFullYear()===n.getFullYear()&&(e="ddd, mmm dS, h:MM TT"),function(t,e,n,r){if(1!==arguments.length||"string"!=typeof t||/\d/.test(t)||(e=t,t=void 0),(t=t||0===t?t:new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");var i=(e=String(ne[e]||e||ne.default)).slice(0,4);"UTC:"!==i&&"GMT:"!==i||(e=e.slice(4),n=!0,"GMT:"===i&&(r=!0));var o=function(){return n?"getUTC":"get"},s=function(){return t[o()+"Date"]()},a=function(){return t[o()+"Day"]()},l=function(){return t[o()+"Month"]()},u=function(){return t[o()+"FullYear"]()},c=function(){return t[o()+"Hours"]()},d=function(){return t[o()+"Minutes"]()},f=function(){return t[o()+"Seconds"]()},h=function(){return t[o()+"Milliseconds"]()},p=function(){return n?0:t.getTimezoneOffset()},m=function(){return se(t)},g=function(){return ae(t)},_={d:function(){return s()},dd:function(){return ie(s())},ddd:function(){return re.dayNames[a()]},DDD:function(){return oe({y:u(),m:l(),d:s(),_:o(),dayName:re.dayNames[a()],short:!0})},dddd:function(){return re.dayNames[a()+7]},DDDD:function(){return oe({y:u(),m:l(),d:s(),_:o(),dayName:re.dayNames[a()+7]})},m:function(){return l()+1},mm:function(){return ie(l()+1)},mmm:function(){return re.monthNames[l()]},mmmm:function(){return re.monthNames[l()+12]},yy:function(){return String(u()).slice(2)},yyyy:function(){return ie(u(),4)},h:function(){return c()%12||12},hh:function(){return ie(c()%12||12)},H:function(){return c()},HH:function(){return ie(c())},M:function(){return d()},MM:function(){return ie(d())},s:function(){return f()},ss:function(){return ie(f())},l:function(){return ie(h(),3)},L:function(){return ie(Math.floor(h()/10))},t:function(){return c()<12?re.timeNames[0]:re.timeNames[1]},tt:function(){return c()<12?re.timeNames[2]:re.timeNames[3]},T:function(){return c()<12?re.timeNames[4]:re.timeNames[5]},TT:function(){return c()<12?re.timeNames[6]:re.timeNames[7]},Z:function(){return r?"GMT":n?"UTC":le(t)},o:function(){return(p()>0?"-":"+")+ie(100*Math.floor(Math.abs(p())/60)+Math.abs(p())%60,4)},p:function(){return(p()>0?"-":"+")+ie(Math.floor(Math.abs(p())/60),2)+":"+ie(Math.floor(Math.abs(p())%60),2)},S:function(){return["th","st","nd","rd"][s()%10>3?0:(s()%100-s()%10!=10)*s()%10]},W:function(){return m()},WW:function(){return ie(m())},N:function(){return g()}};return e.replace(Xt,(function(t){return t in _?_[t]():t.slice(1,t.length-1)}))}(n,e)}function me(t,e){var n;e.innerHTML="<table class='table table-bordered table-striped table-hover table-condensed'>\n        <thead>\n            <tr><th>Name</th>\n            <th>Available</th>\n            <th>Due</th>\n            <th>Until</th>\n        </tr>\n    </thead><tbody></tbody></table>",t.sort((t,e)=>t.name<e.name?-1:t.name>e.name?1:0);for(const r of t){const t=document.createElement("tr");t.innerHTML=`<td>${r.name}</td>\n            <td>${pe(r.unlock_at)}</td>\n            <td>${pe(r.due_at)}</td>\n            <td>${pe(r.lock_at)}</td>`,null===(n=e.querySelector("tbody"))||void 0===n||n.appendChild(t)}}function ge(t,e,n,r){return de(this,void 0,void 0,(function*(){return new Promise(i=>{const o=e.map(t=>[t.name,t.id,t.unlock_at,t.due_at,t.lock_at]);o.unshift(["Assignment","ID","Available","Due","Until"]),o.unshift(["Course",t.toString(),"","",""]);Object(ue.stringify)(o,{delimiter:r.delimiter,quote:r.quote},(t,e)=>{t&&(console.error(t),alert("Error exporting data to CSV/TSV"+t),i("")),n.value=e,i(e)})})}))}function _e(t){return t.map(t=>({name:t.name,title:"",id:t.id,unlock_at:t.unlock_at,due_at:t.due_at,lock_at:t.lock_at}))}function be(){return de(this,void 0,void 0,(function*(){$("#bulk-assignment-dates-status").text("Loading...").show();const t=localStorage.getItem("bulk-assignment-dates-settings")?JSON.parse(localStorage.getItem("bulk-assignment-dates-settings")):{delimiter:",",quote:'"'},e=document.getElementById("bulk-assignment-dates-live-view"),n=document.getElementById("bulk-assignment-dates-editor-view"),r=st();let i=yield ft($.get,"assignments",{per_page:100,"include[]:":["overrides","all_dates"]}),o=_e(i);me(o,e);let s=yield ge(r,o,n,t);$("#bulk-assignment-dates-export-button").on("click",()=>de(this,void 0,void 0,(function*(){s=yield ge(r,o,n,t)}))),$("#bulk-assignment-dates-import-button").on("click",()=>de(this,void 0,void 0,(function*(){const t=yield function(t,e,n){return de(this,void 0,void 0,(function*(){return new Promise(n=>{const r=t=>{$("#bulk-assignment-dates-errors").html("Error exporting data to CSV/TSV<br>\n"+t).show(),console.error(t),n(null)},i=e.value;Object(ce.parse)(i,{trim:!0,skip_empty_lines:!0},(e,i)=>{e&&r(e.message);const o={};let s=[];if(0===i.length)return r("No data found in CSV/TSV area");let a=!0;if(i[0].length){let t=i[0].filter(t=>""!==t.trim());t[0].trim().toLowerCase().startsWith("course")&&(a=!1,s=t.slice(1),i=i.slice(1))}if(a&&(s=[t]),!i.length)return r("Missing Assignment,ID,Available,Due,Until header row (after courses) - not enough rows found");if(!(i[0].length>=2))return r("First row (after courses) should have at least Assignment,ID header row, but only got:"+i[0].join(","));if("assignment"!==i[0][0].trim().toLowerCase()||"id"!==i[0][1].trim().toLowerCase())return r("First row (after courses) should start with Assignment,ID, but got:"+i[0].join(","));i=i.slice(1);for(let t=0;t<i.length;t++){const e=i[t],n=e[0],a=parseInt(e[1],10);if(isNaN(a))return r(`Invalid assignment ID on row ${t+1}: "${e[1]}"`);for(let i=0;i<s.length;i++){const l=s[i].toString();if(o[l]||(o[l]=[]),e.length<2+3*i)return r(`Not enough columns on row ${t+1} for course ${l}`);o[l].push({name:n,title:"",id:a,unlock_at:e[2+3*i]||"",due_at:e[3+3*i]||"",lock_at:e[4+3*i]||""})}}if(!Object.keys(o).includes(t))return r("No data found for course "+t);n(o[t])})})}))}(r.toString(),n);t&&(o=t,me(o,e),$("#bulk-assignment-dates-errors").hide())}))),$("#bulk-assignment-dates-download").on("click",()=>{const t=new Blob([s],{type:"text/csv"}),e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download=`assignment_dates_${r}.csv`,n.click()}),$("#bulk-assignment-dates-upload").on("click",()=>{const t=document.createElement("input");t.type="file",t.accept=".csv,.tsv,.txt",t.onchange=()=>de(this,void 0,void 0,(function*(){if(t.files&&t.files.length>0){const e=t.files[0],r=new FileReader;r.onload=t=>de(this,void 0,void 0,(function*(){var e;const r=null===(e=t.target)||void 0===e?void 0:e.result;n.value=r})),r.readAsText(e)}})),t.click()}),$("#bulk-assignment-dates-delimiter").val(t.delimiter).on("change",()=>{t.delimiter=$("#bulk-assignment-dates-delimiter").val(),fe(t)}),$("#bulk-assignment-dates-quote").val(t.quote).on("change",()=>{t.quote=$("#bulk-assignment-dates-quote").val(),fe(t)}),$("#bulk-assignment-dates-save").on("click",()=>{!function(t,e){localStorage.setItem("bulk-assignment-dates-draft-"+t,JSON.stringify(e))}(r,o),$("#bulk-assignment-dates-load").prop("disabled",!1)});he(r)||$("#bulk-assignment-dates-load").prop("disabled",!0),$("#bulk-assignment-dates-load").on("click",()=>de(this,void 0,void 0,(function*(){const i=he(r);i?(o=i,me(o,e),s=yield ge(r,o,n,t),$("#bulk-assignment-dates-errors").hide()):alert("No draft found for this course, or saved draft was invalid")}))),$("#bulk-assignment-dates-reset").on("click",()=>de(this,void 0,void 0,(function*(){i=yield ft($.get,"assignments",{per_page:100,"include[]:":["overrides","all_dates"]}),me(i,e)}))),$("#bulk-assignment-dates-publish").on("click",()=>de(this,void 0,void 0,(function*(){!function(t,e){var n;de(this,void 0,void 0,(function*(){$("#bulk-assignment-dates-changes-row").show();const t=yield ft($.get,"assignments",{per_page:100,"include[]:":["overrides","all_dates"]}),r={};for(const n of e){if(!n||!n.id)continue;const e=n.id.toString(),i=t.find(t=>t.id===n.id);if(!i){r[e]=[{id:e,name:n.name,error:!0,changes:"Assignment not found"}];continue}const o=_e([i])[0];r[e]=[];let s=r[e];for(const[t,r]of ve)if((o[r]||n[r])&&o[r]!==n[r]){let i=pe(o[r]),a=pe(n[r]);i&&""!==i.trim()||(i="<em>None</em>"),a&&""!==a.trim()||(a="<em>None</em>"),s.push({id:e,name:n.name,error:!1,key:r,old:o[r],new:n[r],changes:`${t}: ${i} -> ${a}`})}}const i=document.getElementById("bulk-assignment-dates-changes");if(i){i.innerHTML="<table class='table table-bordered table-striped table-hover table-condensed'>\n        <thead>\n            <tr><th>Assignment</th>\n            <th>Changes</th>\n        </tr>\n    </thead><tbody></tbody></table>";for(const t of Object.keys(r)){const e=r[t];if(0===e.length)continue;const o=document.createElement("tr");o.innerHTML=`<td>${e[0].name}</td>\n            <td>${e.map(t=>t.changes).join("<br>")}</td>`,null===(n=i.querySelector("tbody"))||void 0===n||n.appendChild(o)}$("#bulk-assignment-dates-apply").off("click"),$("#bulk-assignment-dates-apply").on("click",()=>de(this,void 0,void 0,(function*(){$("#bulk-assignment-dates-changes-status").text("Applying changes...").show();for(const t of Object.keys(r)){const e=r[t];if(0===e.length)continue;const n={};for(const t of e)!t.error&&t.key&&(n[`assignment[${t.key}]`]=t.new||"");const i=yield $.ajax({url:`${ut()}/assignments/${t}`,type:"put",data:n});console.log("Results:",i)}$("#bulk-assignment-dates-changes-status").text("Changes applied!").hide(),$("#bulk-assignment-dates-changes").empty(),alert("Changes applied")})))}else alert("Error: Could not create changes div")}))}(0,o)}))),$("#bulk-assignment-dates-cancel").on("click",()=>{$("#bulk-assignment-dates-changes").empty(),$("#bulk-assignment-dates-changes-row").hide()}),$("#bulk-assignment-dates-status").text("Loaded.").hide()}))}const ve=[["Unlock at","unlock_at"],["Due at","due_at"],["Lock at","lock_at"]];var ye=[{description:"provide user activity report button",condition:()=>tt,dependencies:{sectionTab:"#section-tabs"},action:()=>{$("#section-tabs").append($("\n<li class='section'>\n    <button title='Activity Report' class='btn' id='cwu-activity-report-load'>User Activity Report</button>\n</li>\n")),$("#cwu-activity-report-load").click(()=>{nt("User Activity Report",'\n<div>\nStatus: <span id="cwu-activity-report-status">Loading</span>\n</div>\n<div id="cwu-activity-report-controls"></div>\n<div id="cwu-activity-report-area"></div>\n'),$("#cwu-activity-report-controls").html('\n<div>\n    <label for="cwu-activity-report-control-start">Completed since:</label>\n    <input type="text" class="" id="cwu-activity-report-control-start"\n        name="cwu-activity-report-control-start" title="YYYY-MM-DD hh:mm">\n</div>\n<div>\n    <button class=\'btn btn-success\' id=\'cwu-activity-report-control-build\'\n        disabled\n        >Download and Build Report</button>\n</div>\n'),$("#cwu-activity-report-control-start").val(mt()),$.when(yt(ft($.get,"users",{"enrollment_type[]":"student"}),"Students"),yt(ft($.get,"users",{"enrollment_type[]":["ta","teacher"]}),"Staff"),yt(ft($.get,"assignments",{}),"Assignments")).done(bt)})},deferUntil:p},{description:"provide limit section enrollment button",condition:()=>Z,dependencies:{addUserButton:"#addUsers"},action:t=>{!function(){$("#addUsers").after($('\n<a href="#" class="btn pull-right icon-plus" id="limitEnrollment" role="button"\n    style="margin-left: 1em; margin-right: 1em"\n    title="Limit enrollment for students by their section"\n    aria-label="Limit enrollment for students by their section" data-tooltip="">\n    Limit Enrollment\n</a>\n')),$("#limitEnrollment").on("click",()=>St(this,void 0,void 0,(function*(){nt("Limit Enrollment Tool",'\n<div id="limitEnrollmentFinalStatus"></div>\n<div style="width: 100%; height: 400px; overflow: auto">\n    <ul id="limitEnrollmentResults">\n    </ul>\n</div>\n');const t=yield Et(3);t.length>0?($("#limitEnrollmentFinalStatus").append("Completed with errors for the following students:<br>"),t.forEach(t=>{$("#limitEnrollmentResults").append($(`<li>${t.name} (${t.canvasId})</li>`))})):$("#limitEnrollmentFinalStatus").append("Completed without errors")}))),console.log($("#addUsers"))}()},deferUntil:p},{description:"provide button to spread grade across submissions from speed grader",condition:()=>Y,dependencies:{gradeBox:"#grading-box-extended"},action:t=>{var e;e=t.gradeBox,$(e).after('\n<a href="#" class="btn" id="spreadGrade" role="button"\n    style="margin-left: 1em; margin-right: 1em"\n    title="Spread this grade to any other identified teammates"\n    aria-label="Spread this grade to any other identified teammates" data-tooltip="">\n    Spread Grade\n</a>\n'),$("#spreadGrade").on("click",()=>{nt("Spread Grade",'\n<div id="spreadGradeStatus">Loading, please wait!</div>\n\n<div style="display: flex; flex-flow: row nowrap; margin-bottom: 4px">\n    <div class="col-md-7">\n        <h3>Content to Spread</h3>\n        <div>Grade: <span id="sg-existing-grade"></span></div>\n        <div>Rubric:</div>\n        <table class=\'table table-striped table-condensed\' id="sg-existing-rubric">\n            <thead>\n                <th>Rubric Item</th>\n                <th>Rating</th>\n                <th>Points</th>\n            </thead>\n            <tbody></tbody>\n        </table>\n    </div>\n    <div class="col-md-5">\n        <h3>Students Found</h3>\n        <p>Use the buttons below to copy the grade and/or rubric scores to the other members of this group.</p>\n        <div id="sg-found-partners">\n        </div>\n    </div>\n</div>\n\n<h3>Copy Comments</h3>\n<p>\n    Use the buttons below to copy comments to other submissions.\n    The comments will appear to come from your user account.\n    Disabled buttons indicate that the comment already exists in the target students\' submission (even if you did not make the comment).\n</p>\n<table class=\'table table-striped table-condensed\' id="sg-comments">\n    <thead>\n        <th style="width: 20%">User</th>\n        <th>Comment</th>\n        <th>Actions</th>\n    </thead>\n</table>\n<div style="width: 100%; height: 400px; overflow: auto">\n    <ul id="spreadGradeResults">\n    </ul>\n</div>\n'),Lt()})},deferUntil:p},{description:"label who actually graded an assignment",condition:()=>Y,dependencies:{gradeBox:"#grading-box-extended"},action:t=>{kt(t.gradeBox)},deferUntil:m},{description:"provide button to list ungraded assignments for TAs",condition:()=>J,dependencies:{relatedItemsList:"#sidebar_content .page-action-list"},action:t=>{var e;e=t.relatedItemsList,$(e).append('\n<li id="assignment-list-ungraded-link">\n    <div id="list_ungraded_link_mount_point">\n        <a class="icon-check-plus" href="" id="listUngraded" title="List Ungraded Assignments">Ungraded Submissions</a>\n    </div>\n</li>\n'),$("#listUngraded").on("click",t=>(t.preventDefault(),nt("List Ungraded Submissions",'\n<div id="ungradedReportStatus">Loading, please wait!</div>\n\n<div style="display: flex; flex-flow: row nowrap; margin-bottom: 4px">\n    <div class="col-md-12">\n        <h3>Controls</h3>\n        <div class="form-group">\n            <label for="assignment">Assignment</label>\n            <select id="list-ungraded-assignment-select" class="form-control">\n                <option value="">All Assignments</option>\n            </select>\n        </div>\n        <div class="form-group">\n            <label for="group">Group</label>\n            <select id="list-ungraded-group-select" class="form-control">\n                <option value="">All Groups</option>\n            </select>\n            <input type="checkbox" id="list-ungraded-remember-as-mine" checked\n                class="ms-4">\n            <label for="list-ungraded-remember-as-mine">Remember as mine</label>\n        </div>\n        <div class="form-group">\n            <button id="list-ungraded-submit" class="btn btn-primary" disabled>List Ungraded Submissions</button>\n        </div>\n    </div>\n</div>\n\n<div style="width: 100%; height: 400px; overflow: auto">\n    <table id="ungradedReportTable" class="table table-striped table-bordered table-condensed table-hover">\n        <thead>\n            <tr>\n                <th>Assignment</th>\n                <th>Student</th>\n                <th>Speed Grader</th>\n                <th>Submission</th>\n            </tr>\n        </thead>\n        <tbody id="ungradedReportTableBody">\n        </tbody>\n    </table>\n</div>\n'),Mt(),!1))},deferUntil:p},{description:"list recently added/enrolled users for course",condition:()=>G,dependencies:{sidebar:"#right-side-wrapper"},action:t=>{!function(t){Ut(this,void 0,void 0,(function*(){t&&($(t).append('\n<div role="complementary" aria-label="Recently Enrolled Users"\n    style="margin-top: 24px">\n    <h2>Recently Added Users</h2>\n    <div id="recency-controls" class="form-inline"\n        title="Only show users who have been added in the past N days. If blank, then shows all the users."\n    >\n        <label for="recency-days">Show added in last</label>\n        <input type="number" id="recency-days" \n            class="form-control form-control-sm"\n            style="width: 4em"\n            value="7" min="1">\n        <label for="recency-days">days</label>\n    </div>\n    <div id="recent-enrollment-list">\n        Loading...\n    </div>\n</div>\n'),Wt(t),$("#recency-days").on("change",()=>Wt(t)))}))}(t.sidebar.querySelector("#right-side"))},deferUntil:p},{description:"provide a search button on the global navigation bar",condition:()=>et,dependencies:{globalNav:"#header"},action:t=>{!function(t){Zt(this,void 0,void 0,(function*(){t&&($(t).append('\n<li class="menu-item ic-app-header__menu-list-item">\n    <a id="global_nav_search_link" role="button" href="#"\n        class="ic-app-header__menu-list-link" aria-label="Search" title="Search">\n        <div class="menu-item-icon-container">\n            <i class="icon-search" style="font-size: 1.5em;"></i>\n        </div>\n        <div class="menu-item__text">Search</div>\n    </a>\n</li>\n'),$("#global_nav_search_link").on("click",t=>{t.preventDefault(),nt("Search across courses",Ht),Kt()}))}))}(t.globalNav.querySelector("#menu"))},deferUntil:p},{description:"provide a button to launch a dialog to import/export assignment dates via CSV",condition:()=>H,dependencies:{moreSettingsDropdown:"#settingsMountPoint .al-options"},action:t=>{!function(t){de(this,void 0,void 0,(function*(){t&&($(t).append('\n<li role="presentation" class="ui-menu-item">\n    <a role="menuitem" tabindex="-1" class="ui-corner-all" id="bulk-assignment-dates"\n        aria-label="Import/Export Dates">\n        <i class="icon-calendar"></i> Import/Export Dates\n    </a>\n</li>\n'),$("#bulk-assignment-dates").on("click",()=>de(this,void 0,void 0,(function*(){nt("Assignment Dates Import/Export",'\n<div id="bulk-assignment-dates-status" class="alert alert-info" role="alert">Loading...</div>\n<div id="bulk-assignment-dates-dialog" title="Assignment Dates Import/Export">\n    <div class="row">\n        <div class="col-md-6">\n            <h3>Preview Dates</h3>\n            <button id="bulk-assignment-dates-export-button" class="btn btn-secondary">Export to CSV/TSV Side &rarr;</button>\n        </div>\n        <div class="col-md-6">\n            <h3>Import Assignment Dates</h3>\n            <button id="bulk-assignment-dates-import-button" class="btn btn-secondary">&larr; Import to Preview Side</button>\n        </div>\n    </div>\n    <div class="row" style="margin-top: .5em; margin-bottom: .5em">\n        <div class="col-md-6">\n            <div id="bulk-assignment-dates-live-view"\n                style="width: 100%; padding: 0px; height: 16em; border: 1px solid #ccc; margin-bottom: 1em; overflow: auto; resize: vertical"\n            >\n                Loading...\n            </div>\n        </div>\n        <div class="col-md-6">\n            <textarea id="bulk-assignment-dates-editor-view" \n                style="width: 100%; padding: 0px; resize: vertical; height: 16em; border: 1px solid #ccc; margin-bottom: 1em"\n                class="form-control" rows="10"></textarea>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-6">\n            <div class="form-group">\n                <button id="bulk-assignment-dates-reset" class="btn btn-warning">Reset to Current Actual Data</button>\n            </div>\n        </div>\n        <div class="col-md-6">\n            <div class="form-group">\n                <button id="bulk-assignment-dates-download" class="btn btn-secondary">Download as file</button>\n                <button id="bulk-assignment-dates-upload" class="btn btn-secondary">Upload from file</button>\n            </div>\n            <div id="bulk-assignment-dates-errors" class="alert alert-danger" role="alert" style="display: none"></div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-12">\n            <h3>Settings</h3>\n            <div class="form-group">\n                <label for="bulk-assignment-dates-delimiter">Delimiter</label>\n                <input type="text" id="bulk-assignment-dates-delimiter" class="form-control" value=",">\n            </div>\n            <div class="form-group">\n                <label for="bulk-assignment-dates-quote">Quote</label>\n                <input type="text" id="bulk-assignment-dates-quote" class="form-control" value="&quot;">\n            </div>\n            <div class="form-group">\n                <button id="bulk-assignment-dates-save" class="btn btn-primary">Save Draft</button>\n                <button id="bulk-assignment-dates-load" class="btn btn-primary">Load Draft</button>\n            </div>\n            <button id="bulk-assignment-dates-publish" class="btn btn-success">Preview and Publish Dates to Course</button>\n        </div>\n    </div>\n    <div class="row" id="bulk-assignment-dates-changes-row" style="display: none">\n        <div class="col-md-12">\n            <h3>Preview Published Changes</h3>\n            <div id="bulk-assignment-dates-changes-status" class="alert alert-info" role="alert" style="display: none">Loading...</div>\n            <div id="bulk-assignment-dates-changes"></div>\n            <div class="form-group">\n                <button id="bulk-assignment-dates-apply" class="btn btn-success">Apply Changes</button>\n                <button id="bulk-assignment-dates-cancel" class="btn btn-danger">Cancel Changes</button>\n            </div>\n        </div>\n    </div>\n\n</div>\n'),yield be()}))))}))}(t.moreSettingsDropdown)},deferUntil:p}];const we={main:{condition:f,css:"\n            \n        "}};var ke=we;const Se=i.failureDescriber({siteName:P,extensionName:z,location:document.location});s.run({id:L,name:z,initialAction:()=>o.log(`${z} ${B} - Hello world!`),stylesheets:ke,operationsPlan:{operations:ye,interval:200,tryUntil:r.DOMCONTENTLOADED,extraTries:3,handleFailures:t=>t.forEach(function(){switch(arguments.length){case 1:return a(arguments[0]);case 2:return l(arguments[0],arguments[1]);case 3:return u(arguments[0],arguments[1],arguments[2]);case 4:return c(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return d(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4])}}(o.error,Se))}})}]);